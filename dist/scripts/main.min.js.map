{"version":3,"sources":["main.js"],"names":["getPageParameter","queryStringParams","window","location","search","substring","split","i","len","length","param","copyURL","$","this","hasClass","$url_text","focus","select","document","execCommand","text","pageFoundAction","pageInfo","$DOC","data","TitleObject","title","pageid","fullurl","directUrl","encodeURI","protocol","host","pathname","val","prepareOverlay","initializeCounters","openCard","nukeStyles","isGridActive","addClass","closeCard","removeClass","setTimeout","attr","prepend","css","resizeAction","$gamepanel","gDiff","scrollTop","height","width","offset","left","scrollAction","gMobileLayout","styles2Nuke","$widgetheader","push","find","removeAttr","activeElement","blur","gFirstScroll","$historyLog","$menuClip","$answer","space","top","add","bottom","position","max-height","getBoundingClientRect","box-shadow","outerHeight","gPanelButtonPressedAction","$this","overlayAction","disable","jQueryObj","enable","str","origString","origTokens","match","normTokens","diacritics2url","replaceDiacritics","toLowerCase","replace","STD_PUNCT","wordTokens","SEP_PUNCT","guessed","zeroArray","slide","$widgetHeader","$widgetHeaderAndGuessSection","$topHeader","$widgetHeaderAndI","$widgetHeaderAndBand","$slidingUpMobile","transform","prop","z-index","border-bottom","animate","openOverlay","closeOverlay","asyncQueryForRandomUsablePage","newURL","ajax","url","dataType","then","query","pages","Object","keys","toString","console","log","images","filterUnusableImages","MIN_PAGE_IMAGES","asyncQueryForPageImages","synthImageInfoQuery","current","addImageToDocument","$wrap","randIndex","Math","floor","random","nextImageInfo","imageinfo","splice","wrappedImage","getNewImageHtml","append","incrementCounter","unveil","load","giveWordHint","tmp","n","addNewGoodWords","makeWordNode","addImagesToDocument","_","NUM_INITIAL_IMAGES","ret","unveilImgTag","resize","focusedAction","color","font-style","DEFAULT_INPUT_MESSAGE","keyupAction","blurAction","submitAction","guess","updateMenu","updateMenuMobile","type","makeOverlay","$overlayInfoWrapper","$overlayInfo","$winScreen","hide","show","html","$contains_win_screen","counterID","$counter","oldnum","outof","remove","labelInfo","$label","insertableElementClickAction","$textField","trim","slideDuration","fadeDuration","newHtml","getNewMenuHtml","words","addNewGuessHistory","hist","win","trigger","sNode","inner","wNodeList","s","j","createTextNode","gw","click","reverse","histNode","prependTo","slideDown","fadeIn","wordNodeList","appendTo","word","sock","l","res","Array","isUnusableImage","imageTitle","UNUSABLE_IMAGES","imageArray","pageImages","queryUrl","linkedPageId","promisedUsablePage","when","done","Deferred","ready","$tog","resolve","scroll","$panel_buttons","keyup","change"],"mappings":"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","file":"main.min.js","sourcesContent":["var STD_PUNCT             = /[\\'!\"#$%&()*+,\\-.\\/:;<=>?@\\[\\]^_`{|}~]/g,\n    SEP_PUNCT             = /[\"(),<>?@\\[\\]_{}]/g,\n    NUM_INITIAL_IMAGES    = 2,\n    MIN_PAGE_IMAGES       = 4, //must be >= NUM_INITIAL_IMAGES\n    DEFAULT_INPUT_MESSAGE = 'How to...',\n    $DOC                  = $(document),\n    linkedPageId          = getPageParameter(),\n    promisedUsablePage    = asyncQueryForRandomUsablePage(linkedPageId);\nvar gFirstScroll  = false,\n    gDiff         = 0,\n    gMobileLayout = !isGridActive();\n\nvar styles2Nuke = [];\n\n$.when( //coordinates page loading (a masterpiece)\n    promisedUsablePage.then(asyncQueryForPageImages),\n    $DOC.data('readyDeferred')\n).done(addImagesToDocument);\n\n$DOC.data('readyDeferred', $.Deferred()).ready(function () {\n    var $textField = $('.textField'),\n        $tog       = $('.toggle'),\n        $gamepanel = $('.game.panel');\n\n    $.when(promisedUsablePage).done(pageFoundAction);\n\n    $DOC.data('readyDeferred').resolve();\n\n    $DOC.data('fixedFloatWidth', $gamepanel.width());\n    $DOC.data('fixedFloatLeft', $gamepanel.offset().left);\n\n    $(window).scroll(scrollAction);\n    $(window).resize(resizeAction);\n    $DOC.resize(resizeAction);\n    var $panel_buttons = $('.gb');\n    // $panel_buttons.blur(gPanelButtonBlurAction);\n    $panel_buttons.click(gPanelButtonPressedAction);\n\n    $('#imagehint').click(addImageToDocument);\n    $('#wordhint').click(giveWordHint);\n    $('.card_overlay, button.card_close').click(closeCard);\n\n    $textField.focus(focusedAction);\n    $textField.keyup(keyupAction);\n    $textField.blur(blurAction);\n    $tog.change(slide);\n\n    $('.close_link').click(closeOverlay);\n    $('.copy_link').click(copyURL);\n    $('.about').click(function () {\n        overlayAction('about');\n    });\n    // $('.top_header').click(function () {\n    //     overlayAction('win');\n    // });\n    $('.card_giveup').click(function () {\n        overlayAction('loss');\n    });\n}); //End $DOC.ready\n\nfunction getPageParameter() {\n    var queryStringParams = window.location.search.substring(1).split('&');\n    for (var i = 0, len = queryStringParams.length; i < len; i++) {\n        var param = queryStringParams[i].split('=');\n        if (param[0] === 'p') {\n            return param[1];\n        }\n    }\n}\nfunction copyURL() {\n    if ($(this).hasClass('end_screen')) {\n        var $url_text = $('.url_text.end_screen');\n    } else {\n        var $url_text = $('.url_text.share_screen');\n    }\n    $url_text.focus();\n    $url_text.select();\n    document.execCommand(\"copy\");\n    $('.copy_tooltip_text').text('Copied!');\n\n}\n\nfunction pageFoundAction(pageInfo) {\n    $DOC.data('wikiPageTitle', new TitleObject(pageInfo.title));\n    $DOC.data('wikiPageId', pageInfo.pageid);\n    $DOC.data('wikiPageURL', pageInfo.fullurl);\n\n    var directUrl = encodeURI(window.location.protocol + \"//\" + window.location.host + window.location.pathname + \"?p=\" + pageInfo.pageid);\n\n    // var tweetHref = 'https://twitter.com/intent/tweet?'+encodeURI('text=WikiWhat?&url=' + directUrl);\n    //\n    // $('.twitter').attr('href', tweetHref);\n    // var $fb = $('.facebook');\n    // var fbhref= $fb.attr('href');\n    // // $('.google_plus').attr('href', 'https://plusone.google.com/_/+1/confirm?hl=en&url=http%3A%2F%2F%20'+directUrl);\n    // console.log(fbhref.replace('INSERT_URL_HERE', directUrl));\n    // $fb.attr('href', fbhref.replace('INSERT_URL_HERE', directUrl));\n    // $('.a2a_kit').attr('data-a2a-url', directUrl);\n    $('.url_text').val(directUrl);\n    prepareOverlay(pageInfo);\n    initializeCounters();\n}\n\n\n\nfunction openCard() {\n    nukeStyles();\n    if (isGridActive()) {\n        $('.menu_clip').addClass('slid');\n    }\n    $('.card').addClass('slid');\n    $('.card_overlay').addClass('selected');\n    $('.card_clip').addClass('higherZIndex');\n}\n\nfunction closeCard() {\n    $('.card_overlay').removeClass('selected');\n    setTimeout(function () {\n        $('.card_message').removeClass('selected');\n    }, 400);\n    $('.card, .menu_clip').removeClass('slid');\n\n    $('.card_clip').removeClass('higherZIndex');\n\n}\n\nfunction prepareOverlay(pageInfo) {\n    $('.page_link').attr('href', pageInfo.fullurl).prepend('<span>How to ' + pageInfo.title + '</span>');\n}\n\nfunction isGridActive() {\n    return ($('.trim').css('display') !== 'none');\n}\n\nfunction resizeAction() {\n    var $gamepanel = $('.panel.game');\n\n    gDiff = $DOC.scrollTop() + $(window).height() - ($DOC.height() - $('.page_footer').height());\n\n    $DOC.data('fixedFloatWidth', $gamepanel.width());\n    $DOC.data('fixedFloatLeft', $gamepanel.offset().left);\n    scrollAction();\n    if (isGridActive()) {\n        if (gMobileLayout) {\n            gMobileLayout = false;\n            nukeStyles();\n        }\n    } else {\n        if (!gMobileLayout) {\n            gMobileLayout = true;\n            nukeStyles();\n        }\n    }\n}\n\nfunction nukeStyles() {\n    if (styles2Nuke.length === 0) {\n        var $widgetheader = $('.widget_header');\n        styles2Nuke.push(\n            $('.history_log'),\n            $('.menu_clip'),\n            $('.sliding_up_mobile'),\n            $widgetheader,\n            $widgetheader.find('i'),\n            $widgetheader.find('.band'),\n            $('.guessSection'),\n            $('.spacie')\n        );\n    }\n    for (var i = styles2Nuke.length; i <= 0; i--) {\n        styles2Nuke[i].removeAttr('style');\n    }\n    $('.answer').css('box-shadow', ''); //done separately to preserve custom 'bottom' prop\n    $('.toggle').removeAttr('checked');\n}\n\nfunction scrollAction() {\n    if ($(document.activeElement).hasClass('gb')) {\n        $(document.activeElement).blur();\n    }\n    if (isGridActive()) {\n        if (!gFirstScroll) {\n            gFirstScroll = true;\n            resizeAction();\n            return;\n        }\n        var $gamepanel  = $('.game.panel'),\n            $historyLog = $('.history_log'),\n            $menuClip   = $('.menu_clip'),\n            $answer     = $('.answer'),\n            space       = $(window).scrollTop() - ($gamepanel.offset().top + $gamepanel.height());\n\n        closeCard();\n        gDiff = $(window).scrollTop() + $(window).height() - $('.page_footer').offset().top;\n\n        if (gDiff > 0) {\n            $answer.add($menuClip).css({bottom: gDiff});\n        } else {\n            $answer.add($menuClip).css({bottom: 0});\n        }\n        if (space > 0) {\n            $('.spacie').css({\n                position: 'relative'\n            });\n            $historyLog.css({\n                \"max-height\": $answer[0].getBoundingClientRect().top - $historyLog[0].getBoundingClientRect().top - 30\n            });\n            $menuClip.css({\n                position: 'fixed',\n                width: $DOC.data('fixedFloatWidth'),\n                top: 20,\n                left: $DOC.data('fixedFloatLeft')\n            });\n            $menuClip.find('.panel').css({\n                'box-shadow': '0 0 8px rgba(0, 0, 0, 0.16)'\n            });\n        } else {\n            $menuClip.css({\n                position: '',\n                width: '',\n                top: '',\n                left: '',\n                'box-shadow': ''\n            });\n            $menuClip.find('.panel').css({\n                'box-shadow': ''\n            });\n            $('.spacie').css({\n                position: 'absolute',\n                height: $menuClip.outerHeight(true)\n            });\n        }\n    }\n}\n\nfunction gPanelButtonPressedAction() {\n    $('.card_message').removeClass('selected');\n    var $this = $(this);\n    if ($this.attr('id') === 'rules') {\n        overlayAction('rules');\n        return;\n    }\n    if ($this.attr('id') === 'giveup') {\n        $('.giveup_confirmation').addClass('selected');\n    } else if ($this.attr('id') === 'restart') {\n        $('.restart_confirmation').addClass('selected');\n    } else if ($this.attr('id') === 'share') {\n        $('.sharingsux').addClass('selected');\n    }\n    openCard();\n}\n\nfunction disable(jQueryObj) {\n    return jQueryObj.attr('disabled', 'true');\n}\n\nfunction enable(jQueryObj) {\n    return jQueryObj.removeAttr('disabled');\n}\n\nfunction TitleObject(str) {\n    this.origString = str;\n    this.origTokens = str.match(/\\S+/g); //original chars/punct\n    this.normTokens =\n        diacritics2url.replaceDiacritics(str.toLowerCase().replace(STD_PUNCT, ''))\n            .match(/\\S+/g);\n    this.wordTokens = str.replace(SEP_PUNCT, '').match(/\\S+/g);\n    this.guessed = zeroArray(this.origTokens.length);\n}\n\nfunction slide() {\n    var $this                        = $(this),\n        $widgetHeader                = $('.widget_header'),\n        $widgetHeaderAndGuessSection = $widgetHeader.add('.guessSection'),\n        $answer                      = $('.answer'),\n        $menuClip                    = $('.menu_clip'),\n        $topHeader                   = $('.top_header'),\n        $widgetHeaderAndI            = $widgetHeader.find('i'),\n        $widgetHeaderAndBand         = $widgetHeader.find('.band'),\n        $slidingUpMobile             = $('.sliding_up_mobile');\n\n    $slidingUpMobile.css({\n        \"transform\": \"translate(0,0)\"\n    });\n    if (!$this.prop('checked')) {\n        $slidingUpMobile.animate({\n            \"transform\": \"translate(0,0)\"\n        }, 500, 'swing', function () {\n            $widgetHeaderAndGuessSection.css({\n                'box-shadow': 'none'\n            });\n            $answer.css({\n                'box-shadow': '0 0 10px rgba(0, 0, 0, 0.16)'\n            });\n            $menuClip.add($topHeader).removeAttr('style');\n        });\n\n        $widgetHeaderAndI.css({\n            \"transform\": \"rotate(0deg)\"\n        });\n        $widgetHeaderAndBand.css({\n            'border-bottom': '.5px solid #8a8a89'\n        });\n\n    } else {\n        closeCard();\n        $menuClip.css({\n            \"z-index\": 1\n        });\n        $topHeader.css({\n            \"z-index\": 1\n        });\n        $slidingUpMobile.css({\n            \"transform\": \"translate(0,-\" + $('.menu').height() + \"px)\"\n        });\n        $widgetHeaderAndI.css({\n            \"transform\": \"rotate(180deg)\"\n        });\n        $widgetHeaderAndBand.css({\n            'border-bottom': 'none'\n        });\n        $widgetHeaderAndGuessSection.css({\n            'box-shadow': '0 0 10px rgba(0, 0, 0, 0.16)'\n        });\n        $answer.css({\n            'box-shadow': 'none'\n        });\n    }\n}\n\nfunction openOverlay() {\n    $('.overlay').height('100%');\n}\n\nfunction closeOverlay() {\n    $('.overlay').height('0');\n}\n\nfunction asyncQueryForRandomUsablePage(pageid) {\n    /* request random article and see if it has enough usable images*/\n    var pageid = pageid || null;\n    var newURL;\n    if (pageid != null) {\n        newURL = 'https://www.wikihow.com/api.php?action=query&format=json&prop=info%7Cimages&pageids=' + pageid + '&inprop=url&imlimit=100';\n    } else {\n        newURL = 'https://www.wikihow.com/api.php?action=query&format=json&prop=info%7Cimages&generator=random&inprop=url&imlimit=100&grnnamespace=0#';\n    }\n\n\n    return $.ajax({ //get random page using mediawiki API\n        url: newURL,\n        dataType: 'jsonp'\n    }).then(function (data) {\n        /*The mediawiki api answers our request with a complex json object structure.\n         However, all of the data we're interested in is kept in a sub-object, \"pageInfo\"\n         Accessing it requires making this series of calls:\n         var page = jsonpData.query.pages;\n         var pageId = Object.keys(page)[0];\n         var pageInfo = page[pageId.toString()];\n         This is condensed to the lines below: */\n        var pageInfo = data.query.pages[Object.keys(data.query.pages)[0].toString()];\n        console.log(pageInfo);\n        console.log(pageInfo.fullurl);\n        console.log(pageInfo.images);\n        filterUnusableImages(pageInfo.images);\n\n\n        if (pageInfo.images == null || // == is intentional, checks for undefined\n            pageInfo.images.length < MIN_PAGE_IMAGES ||\n            pageInfo.title.length > 256) {\n\n            return asyncQueryForRandomUsablePage(); //try again\n        }\n        return pageInfo;\n    });\n}\n\nfunction asyncQueryForPageImages(pageInfo) {\n    return $.ajax({ //make another async. request for image urls\n        url: synthImageInfoQuery(pageInfo.images),\n        dataType: 'jsonp'\n    }).then(function (data) {\n        //create array and fill w/ slightly more accessable image data\n        var images = [];\n        var keys = Object.keys(data.query.pages);\n\n        for (var i = 0; i < keys.length; i++) {\n            //put image objects in new array\n            if (keys[i] > 0) { //missing images have ids of -1; don't include\n                var current = data.query.pages[keys[i].toString()];\n                images.push(current);\n            }\n        }\n        return images;\n    });\n}\n\nfunction addImageToDocument() {\n    var images = $DOC.data('undisplayedImages');\n    if (images.length !== 0) {\n        var $wrap = $('.wrap');\n        var randIndex = Math.floor(Math.random() * images.length);\n        var nextImageInfo = images[randIndex].imageinfo[0];\n\n        images.splice(randIndex, 1); //removes used image from array and shifts all subsequent indexes down 1\n\n        var wrappedImage = getNewImageHtml(nextImageInfo);\n        $wrap.append(wrappedImage);\n        incrementCounter('numImageHints');\n\n        $(wrappedImage.find('img')[0]).unveil(0, function () {\n            $(this).load(function () {\n                scrollAction();\n            })\n        });\n        if (images.length < 1) {\n            disable($(this)); //disable button calling this as a listener funct.\n        }\n    } else {\n        disable($(this));\n    }\n\n}\n\nfunction giveWordHint() {\n    console.log(\"lol\");\n    var title = $DOC.data('wikiPageTitle');\n    var tmp = [];\n    for (var i = title.normTokens.length - 1; i >= 0; i--) {\n        if (title.guessed[i] === 0) {\n            tmp.push(i);\n        }\n    }\n    if (tmp.length >= 1) {\n        var n = Math.floor(Math.random() * tmp.length);\n        title.guessed[tmp[n]]++;\n        incrementCounter('numWordHints');\n\n        addNewGoodWords(makeWordNode(title.wordTokens[tmp[n]]), 'slow');\n        if (tmp.length === 1) {\n            disable($(this)); //disable button calling this as a listener funct.\n        }\n    } else {\n        disable($(this)); //disable button calling this as a listener funct.\n    }\n}\n\nfunction addImagesToDocument(images, _) { //argument _ is extra passed in from $.when().done()\n    var $wrap = $('.wrap');\n    $DOC.data('undisplayedImages', images);\n    for (var i = 0; i < NUM_INITIAL_IMAGES && images.length !== 0; i++) {\n        var randIndex     = Math.floor(Math.random() * images.length),\n            nextImageInfo = images[randIndex].imageinfo[0];\n        images.splice(randIndex, 1); //removes used image from array and shifts all subsequent indexes down 1\n\n        var wrappedImage = getNewImageHtml(nextImageInfo);\n        $wrap.append(wrappedImage);\n        $(wrappedImage.find('img')[0]).unveil(0, function () {\n            $(this).load(function () {\n                scrollAction();\n            })\n        });\n    }\n}\n\n/*getNewImageHtml returns a new jQ node representing the input image\n wrapped in a page image wrapper*/\nfunction getNewImageHtml(nextImageInfo) {\n    var ret          = $('<div class=\"box_wrapper floatyWrapper row\"></div>'),\n        unveilImgTag = $('<img class=\"pageImage u-max-full-width\" src=\"/images/ring.gif\"/>');\n\n    ret.resize(function () {\n        console.log(\"HEYYYY\");\n        resizeAction();\n    });\n    // TODO: make media delivery responsive/make sense (this isn't quite it)\n    // if (!isGridActive()) {\n    //     unveilImgTag.attr('data-src', nextImageInfo.thumburl);\n    //     console.log('thumb');\n    // } else {\n        unveilImgTag.attr('data-src', nextImageInfo.url);\n    // }\n    return ret.append(unveilImgTag);\n}\n\n/*focusedAction fires when text input gains focus.\n If the default message was present, it is cleared.\n The text color is set to its normal value (as opposed to the\n greyed-out color of the default message).\n */\nfunction focusedAction() {\n    var $this = $(this);\n\n    /*NOTE: hard coded color value of focused textbox text*/\n    $this.css({color: '#222', 'font-style': 'normal'});\n    if ($this.val() === DEFAULT_INPUT_MESSAGE) {\n        $this.val('');\n    }\n}\n\n/*keyupAction fires when a key is released while typing in text input.\n Enables/disables submit button based on presence of text*/\nfunction keyupAction() {\n    if ($(this).val() !== '')\n        enable($('.guessSubmit'));\n    else\n        disable($('.guessSubmit'));\n}\n\n/*blurAction fires when text input loses focus.\n Enables/disables submit button in the same way as keyupAction.\n If input is empty, replaces the default message text and styling*/\nfunction blurAction() {\n    var $this = $(this);\n    if ($this.val() !== '')\n        enable($('.guessSubmit'));\n    else {\n        $this.val(DEFAULT_INPUT_MESSAGE);\n        $this.css({color: '#8a8a89', 'font-style': 'italic'});\n        disable($('.guessSubmit'));\n    }\n}\n\n/*submitAction is called when a guess is submitted\n Guess info is obtained by looking at the value of the textbox.\n Updates to guess history and known words are performed.\n The menu is scrolled to put the new history entry into view.*/\nfunction submitAction() {\n    var $menu = $('.menu'),\n        str   = $('.textField').val(),\n        guess = new TitleObject(str.replace(/^\\s*how\\s+to\\s+/gi, '')),\n        title = $DOC.data('wikiPageTitle');\n\n    if (isGridActive()) {\n        if (updateMenu(guess, 'slow', 'slow')) {\n            overlayAction('win');\n        }\n    } else {\n        if (updateMenuMobile(guess, 'slow', 'slow')) {\n            overlayAction('win');\n        }\n    }\n    $('.textField').val('');\n}\n\nfunction overlayAction(type) {\n    makeOverlay(type);\n    openOverlay();\n}\n\nfunction makeOverlay(type) {\n\n    var $overlayInfoWrapper = $('.overlay_info_wrapper');\n    var $overlayInfo = $overlayInfoWrapper.find('.overlay_info');\n    var $winScreen = $('.win_screen');\n\n    $overlayInfo.hide();\n    $overlayInfoWrapper.removeClass('contains_attribs').removeClass('contains_win_screen').removeClass('contains_rules_screen');\n    switch (type) {\n        case 'win':\n            $('.score').show();\n            $overlayInfoWrapper.addClass('contains_win_screen');\n            $winScreen.show().find('h2').text('Yep!');\n            // $('.win_screen h2').text('Yep!');\n            $winScreen.find('h2 + h6').html('<i>Of course</i> we\\'re learning');\n            // $('.win_screen h2 + h6').html('<i>Of course</i> we\\'re learning');\n            var $contains_win_screen = $('.contains_win_screen');\n            $contains_win_screen.css({top: ($(window).height() - $contains_win_screen.outerHeight(true)) / 2});\n            break;\n        case 'loss':\n            $('.score').hide();\n            $overlayInfoWrapper.addClass('contains_win_screen');\n            $winScreen.show().find('h2').text('¯\\\\_(ツ)_/¯');\n            // $('.win_screen h2').text('¯\\\\_(ツ)_/¯');\n\n            $winScreen.find('h2 + h6').html('We were clearly going for');\n            // $('.win_screen h2 + h6').html('We were clearly going for');\n\n            var $contains_win_screen = $('.contains_win_screen');\n            $contains_win_screen.css({top: ($(window).height() - $contains_win_screen.outerHeight(true)) / 2});\n            break;\n        case 'about':\n            $overlayInfoWrapper.addClass('contains_attribs');\n            $('.attribs').show();\n            break;\n        case 'rules':\n            $overlayInfoWrapper.addClass('contains_rules_screen');\n            $('.rules_screen').show();\n            break;\n    }\n}\n\nfunction initializeCounters() {\n    $('.counter').data('num', 0);\n    $('#numImageHints').data('num', NUM_INITIAL_IMAGES);\n\n    $('#numImageHints').data('labelInfo', ['image', 'images']);\n    $('#numWordHints').data('labelInfo', ['hint', 'hints']);\n    $('.numGuesses').data('labelInfo', ['try', 'tries']);\n    $('#numWords').data('outof', $DOC.data('wikiPageTitle').normTokens.length);\n\n    $('.counter').text('0');\n    $('#numImageHints').text(NUM_INITIAL_IMAGES);\n    $('#numWords').text('(0/' + $('#numWords').data('outof') + ')');\n}\n\nfunction incrementCounter(counterID) {\n    var $counter = counterID === 'numGuesses' ? $('.' + counterID) : $('#' + counterID),\n        oldnum   = $counter.data('num');\n\n    $counter.data('num', oldnum + 1);\n    $counter.text(oldnum + 1);\n\n    if (counterID === 'numWords') {\n        var outof = $counter.data('outof');\n        if (oldnum + 1 !== 0) {\n            $('.empty_message').remove();\n        }\n        $counter.text('(' + (oldnum + 1) + '/' + outof + ')');\n    }\n\n    var labelInfo = $counter.data('labelInfo');\n    if (labelInfo) {\n        var $label = $('#' + counterID + '_label');\n        if (oldnum + 1 === 1) {\n            $label.text(labelInfo[0]);\n        } else if (oldnum + 1 === 2) {\n            $label.text(labelInfo[1]);\n        }\n    }\n}\n\nfunction insertableElementClickAction() {\n    var $textField = $('.textField');\n\n    $textField.focus();\n    if ($textField.val() === '') {\n        $textField.val($(this).text().trim());\n    } else {\n        $textField.val($textField.val() + ' ' + $(this).text().trim());\n    }\n}\n\n/*updateMenu delegates the creation of new DOM nodes for the guess\n and coordinates their addition to the document with respect to their\n elements' animation speeds*/\nfunction updateMenu(guess, slideDuration, fadeDuration) {\n    var newHtml = getNewMenuHtml(guess, $DOC.data('wikiPageTitle'));\n    addNewGoodWords(newHtml.words, fadeDuration);\n    addNewGuessHistory(newHtml.hist, slideDuration, fadeDuration);\n    return newHtml.win;\n}\n\nfunction updateMenuMobile(guess, slideDuration, fadeDuration) {\n    if (!$('.toggle').prop('checked'))\n        $('.toggle').trigger('click');\n    return updateMenu(guess, slideDuration, fadeDuration);\n}\n\n/*getNewMenuHtml goes through the new guess word-by-word and creates\n the DOM nodes that will display them. All words are explicitly added as\n text nodes (to avoid xss), and correct words are wrapped in an extra <span>\n for highlighting. Newly guessed correct words are also packaged into\n elements for the list of good words. Results returned in object containing\n an sNode (single jQuery node with the new history entry) and a wNodeList\n (possibly empty array of jQuery selectable_container-class nodes each\n representing a new good word)*/\nfunction getNewMenuHtml(guess, title) {\n    var sNode     = $('<div class=\"guess_container\"><div class=\"inner menuText\"></div></div><hr>'),\n        inner     = sNode.find('.inner'),\n        wNodeList = [],\n        s         = '',\n        win       = (guess.normTokens.length === title.normTokens.length);\n\n    for (var i = 0; i < guess.normTokens.length; i++) {\n        for (var j = 0; j < title.normTokens.length; j++) {\n            if (i === j && guess.normTokens[i] !== title.normTokens[j]) {\n                win = false;\n            }\n            if (guess.normTokens[i] === title.normTokens[j]) {\n                inner.append(document.createTextNode(s));\n                s = '';\n                var gw = $('<em></em>').text(guess.origTokens[i].trim() + ' ');\n                gw.click(insertableElementClickAction);\n                inner.append(gw);\n                if (title.guessed[j] === 0) {\n                    wNodeList.push(makeWordNode(title.origTokens[j]));\n                }\n                guess.guessed[i]++;\n                title.guessed[j]++;\n                break;\n            } else if (j === title.normTokens.length - 1) { //no match & this is last time comparing this guess tok\n                s = s + guess.origTokens[i] + ' ';\n            }\n        }\n    }\n    inner.append(document.createTextNode(s));\n    return {'words': wNodeList.reverse(), 'hist': sNode, 'win': win};\n}\n\n/*addNewGuessHistory animates the new guess history entry element node\n into the history list in the menu. New entry fades in over fadeDuration\n while older entries slide down over slideDuration*/\nfunction addNewGuessHistory(histNode, slideDuration, fadeDuration) {\n    incrementCounter('numGuesses');\n    $('.empty_message_hist').remove();\n    $(histNode).hide().prependTo('.history_log').slideDown(\n        slideDuration).fadeIn(fadeDuration);\n}\n\n/*addNewGoodWords iterates over the list of new good word nodes and fades\n each one into the document over a specified fadeDuration*/\nfunction addNewGoodWords(wordNodeList, fadeDuration) {\n\n    for (var i = wordNodeList.length - 1; i >= 0; i--) {\n        $(wordNodeList[i]).hide().appendTo('.good_words').fadeIn('fadeDuration');\n        incrementCounter('numWords');\n    }\n}\n\n/*makeWordNode returns a \"good_word\"-style jQ node with input text string*/\nfunction makeWordNode(word) {\n    var sock = $('<div class=\"selectable_container\"><span class=\"word menuText\"></span></div>'),\n        tmp  = sock.find('.word')[0];\n    $(tmp).text(word);\n    $(tmp).click(insertableElementClickAction);\n    return sock;\n}\n\n/*zeroArray returns a new zero-filled array of length l*/\nfunction zeroArray(l) {\n    var res = new Array(l);\n    while (--l >= 0) {\n        res[l] = 0;\n    }\n    return res;\n}\n\n/*isUnusableImage checks the title of an image against a collection of\n titles known to belong to junk images (found in UnusableImages.scripts).\n Returns true if a match is identified.\n Unusable (junk) images are parts of wikihow page templates that the server\n returns alongside actual article images*/\nfunction isUnusableImage(imageTitle) {\n    for (var i = UNUSABLE_IMAGES.length - 1; i >= 0; i--) {\n        if (UNUSABLE_IMAGES[i] === imageTitle) {\n            return true;\n        }\n    }\n    return false;\n}\n\n/*filterUnusableImages iterates through a list of images, calling\n isUnusableImage on the title of each one. If an image is found to be\n unusable, it is removed from the array and discarded.\n This method modifies the input directly and does not have a return value*/\nfunction filterUnusableImages(imageArray) {\n    if (imageArray != null) { // != is intentional, checks for undefined\n        for (var i = imageArray.length - 1; i >= 0; i--) {\n            if (isUnusableImage(imageArray[i].title))\n                imageArray.splice(i, 1);\n        }\n    }\n}\n\n/*synthImageInfoQuery returns a url-encoded string written to query\n wikihow's mediawiki api for source information on the specific\n images contained in the input list. */\nfunction synthImageInfoQuery(pageImages) {\n    //base url to query api for image sources\n    var queryUrl =\n            'https://www.wikihow.com/api.php?action=query&format=json&prop=imageinfo&titles=';\n    //append image titles seperated by '%7C' (url encoded '|')\n    for (var i = 0; i < pageImages.length; i++) {\n        queryUrl = queryUrl + pageImages[i].title;\n        if (i < pageImages.length - 1)\n            queryUrl = queryUrl + '%7C'; //url-encoded '|'\n        else\n            queryUrl = queryUrl + '&iiprop=url%7Csize&iiurlwidth=500'; //additional query properties\n    }\n    queryUrl = queryUrl.replace(/ /g, '+'); //url-encode spaces\n    return queryUrl;\n}\n"],"sourceRoot":"/source/"}
{"version":3,"sources":["main.min.js","/source/main.js"],"names":["getPageParameter","queryStringParams","window","location","search","substring","split","i","len","length","param","copyURL","$","this","hasClass","$url_text","focus","select","document","execCommand","text","pageFoundAction","pageInfo","$DOC","data","TitleObject","title","pageid","fullurl","directUrl","encodeURI","protocol","host","pathname","val","prepareOverlay","initializeCounters","openCard","nukeStyles","isGridActive","addClass","closeCard","removeClass","setTimeout","attr","prepend","css","resizeAction","$gamepanel","gDiff","scrollTop","height","width","offset","left","scrollAction","gMobileLayout","styles2Nuke","$widgetheader","push","find","removeAttr","activeElement","blur","gFirstScroll","$historyLog","$menuClip","$answer","space","top","add","bottom","position","max-height","getBoundingClientRect","box-shadow","outerHeight","gPanelButtonPressedAction","$this","overlayAction","disable","jQueryObj","enable","str","origString","origTokens","match","normTokens","diacritics2url","replaceDiacritics","toLowerCase","replace","STD_PUNCT","wordTokens","SEP_PUNCT","guessed","zeroArray","slide","$widgetHeader","$widgetHeaderAndGuessSection","$topHeader","$widgetHeaderAndI","$widgetHeaderAndBand","$slidingUpMobile","transform","prop","z-index","border-bottom","animate","openOverlay","closeOverlay","asyncQueryForRandomUsablePage","newURL","ajax","url","dataType","then","query","pages","Object","keys","toString","console","log","images","filterUnusableImages","MIN_PAGE_IMAGES","asyncQueryForPageImages","synthImageInfoQuery","current","addImageToDocument","$wrap","randIndex","Math","floor","random","nextImageInfo","imageinfo","splice","wrappedImage","getNewImageHtml","append","incrementCounter","unveil","load","giveWordHint","tmp","n","addNewGoodWords","makeWordNode","addImagesToDocument","_","NUM_INITIAL_IMAGES","ret","unveilImgTag","resize","focusedAction","color","font-style","DEFAULT_INPUT_MESSAGE","keyupAction","blurAction","submitAction","guess","updateMenu","updateMenuMobile","type","makeOverlay","$overlayInfoWrapper","$overlayInfo","$winScreen","hide","show","html","$contains_win_screen","counterID","$counter","oldnum","outof","remove","labelInfo","$label","insertableElementClickAction","$textField","trim","slideDuration","fadeDuration","newHtml","getNewMenuHtml","words","addNewGuessHistory","hist","win","trigger","sNode","inner","wNodeList","s","j","createTextNode","gw","click","reverse","histNode","prependTo","slideDown","fadeIn","wordNodeList","appendTo","word","sock","l","res","Array","isUnusableImage","imageTitle","UNUSABLE_IMAGES","imageArray","pageImages","queryUrl","linkedPageId","promisedUsablePage","when","done","Deferred","ready","$tog","resolve","scroll","$panel_buttons","keyup","change"],"mappings":"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","file":"main.min.js","sourcesContent":["'use strict';var STD_PUNCT = /[\\'!\"#$%&()*+,\\-.\\/:;<=>?@\\[\\]^_`{|}~]/g, \nSEP_PUNCT = /[\"(),<>?@\\[\\]_{}]/g, \nNUM_INITIAL_IMAGES = 2, \nMIN_PAGE_IMAGES = 4, //must be >= NUM_INITIAL_IMAGES\nDEFAULT_INPUT_MESSAGE = 'How to...', \n$DOC = $(document), \nlinkedPageId = getPageParameter(), \npromisedUsablePage = asyncQueryForRandomUsablePage(linkedPageId);\nvar gFirstScroll = false, \ngDiff = 0, \ngMobileLayout = !isGridActive();\n\nvar styles2Nuke = [];\n\n$.when( //coordinates page loading (a masterpiece)\npromisedUsablePage.then(asyncQueryForPageImages), \n$DOC.data('readyDeferred')).\ndone(addImagesToDocument);\n\n$DOC.data('readyDeferred', $.Deferred()).ready(function () {\n    var $textField = $('.textField'), \n    $tog = $('.toggle'), \n    $gamepanel = $('.game.panel');\n\n    $.when(promisedUsablePage).done(pageFoundAction);\n\n    $DOC.data('readyDeferred').resolve();\n\n    $DOC.data('fixedFloatWidth', $gamepanel.width());\n    $DOC.data('fixedFloatLeft', $gamepanel.offset().left);\n\n    $(window).scroll(scrollAction);\n    $(window).resize(resizeAction);\n    $DOC.resize(resizeAction);\n    var $panel_buttons = $('.gb');\n    // $panel_buttons.blur(gPanelButtonBlurAction);\n    $panel_buttons.click(gPanelButtonPressedAction);\n\n    $('#imagehint').click(addImageToDocument);\n    $('#wordhint').click(giveWordHint);\n    $('.card_overlay, button.card_close').click(closeCard);\n\n    $textField.focus(focusedAction);\n    $textField.keyup(keyupAction);\n    $textField.blur(blurAction);\n    $tog.change(slide);\n\n    $('.close_link').click(closeOverlay);\n    $('.copy_link').click(copyURL);\n    $('.about').click(function () {\n        overlayAction('about');});\n\n    // $('.top_header').click(function () {\n    //     overlayAction('win');\n    // });\n    $('.card_giveup').click(function () {\n        overlayAction('loss');});});\n\n//End $DOC.ready\n\nfunction getPageParameter() {\n    var queryStringParams = window.location.search.substring(1).split('&');\n    for (var i = 0, len = queryStringParams.length; i < len; i++) {\n        var param = queryStringParams[i].split('=');\n        if (param[0] === 'p') {\n            return param[1];}}}\n\n\n\nfunction copyURL() {\n    if ($(this).hasClass('end_screen')) {\n        var $url_text = $('.url_text.end_screen');} else \n    {\n        var $url_text = $('.url_text.share_screen');}\n\n    $url_text.focus();\n    $url_text.select();\n    document.execCommand(\"copy\");\n    $('.copy_tooltip_text').text('Copied!');}\n\n\n\nfunction pageFoundAction(pageInfo) {\n    $DOC.data('wikiPageTitle', new TitleObject(pageInfo.title));\n    $DOC.data('wikiPageId', pageInfo.pageid);\n    $DOC.data('wikiPageURL', pageInfo.fullurl);\n\n    var directUrl = encodeURI(window.location.protocol + \"//\" + window.location.host + window.location.pathname + \"?p=\" + pageInfo.pageid);\n\n    // var tweetHref = 'https://twitter.com/intent/tweet?'+encodeURI('text=WikiWhat?&url=' + directUrl);\n    //\n    // $('.twitter').attr('href', tweetHref);\n    // var $fb = $('.facebook');\n    // var fbhref= $fb.attr('href');\n    // // $('.google_plus').attr('href', 'https://plusone.google.com/_/+1/confirm?hl=en&url=http%3A%2F%2F%20'+directUrl);\n    // console.log(fbhref.replace('INSERT_URL_HERE', directUrl));\n    // $fb.attr('href', fbhref.replace('INSERT_URL_HERE', directUrl));\n    // $('.a2a_kit').attr('data-a2a-url', directUrl);\n    $('.url_text').val(directUrl);\n    prepareOverlay(pageInfo);\n    initializeCounters();}\n\n\n\n\nfunction openCard() {\n    nukeStyles();\n    if (isGridActive()) {\n        $('.menu_clip').addClass('slid');}\n\n    $('.card').addClass('slid');\n    $('.card_overlay').addClass('selected');\n    $('.card_clip').addClass('higherZIndex');}\n\n\nfunction closeCard() {\n    $('.card_overlay').removeClass('selected');\n    setTimeout(function () {\n        $('.card_message').removeClass('selected');}, \n    400);\n    $('.card, .menu_clip').removeClass('slid');\n\n    $('.card_clip').removeClass('higherZIndex');}\n\n\n\nfunction prepareOverlay(pageInfo) {\n    $('.page_link').attr('href', pageInfo.fullurl).prepend('<span>How to ' + pageInfo.title + '</span>');}\n\n\nfunction isGridActive() {\n    return $('.trim').css('display') !== 'none';}\n\n\nfunction resizeAction() {\n    var $gamepanel = $('.panel.game');\n\n    gDiff = $DOC.scrollTop() + $(window).height() - ($DOC.height() - $('.page_footer').height());\n\n    $DOC.data('fixedFloatWidth', $gamepanel.width());\n    $DOC.data('fixedFloatLeft', $gamepanel.offset().left);\n    scrollAction();\n    if (isGridActive()) {\n        if (gMobileLayout) {\n            gMobileLayout = false;\n            nukeStyles();}} else \n\n    {\n        if (!gMobileLayout) {\n            gMobileLayout = true;\n            nukeStyles();}}}\n\n\n\n\nfunction nukeStyles() {\n    if (styles2Nuke.length === 0) {\n        var $widgetheader = $('.widget_header');\n        styles2Nuke.push(\n        $('.history_log'), \n        $('.menu_clip'), \n        $('.sliding_up_mobile'), \n        $widgetheader, \n        $widgetheader.find('i'), \n        $widgetheader.find('.band'), \n        $('.guessSection'), \n        $('.spacie'));}\n\n\n    for (var i = styles2Nuke.length; i <= 0; i--) {\n        styles2Nuke[i].removeAttr('style');}\n\n    $('.answer').css('box-shadow', ''); //done separately to preserve custom 'bottom' prop\n    $('.toggle').removeAttr('checked');}\n\n\nfunction scrollAction() {\n    if ($(document.activeElement).hasClass('gb')) {\n        $(document.activeElement).blur();}\n\n    if (isGridActive()) {\n        if (!gFirstScroll) {\n            gFirstScroll = true;\n            resizeAction();\n            return;}\n\n        var $gamepanel = $('.game.panel'), \n        $historyLog = $('.history_log'), \n        $menuClip = $('.menu_clip'), \n        $answer = $('.answer'), \n        space = $(window).scrollTop() - ($gamepanel.offset().top + $gamepanel.height());\n\n        closeCard();\n        gDiff = $(window).scrollTop() + $(window).height() - $('.page_footer').offset().top;\n\n        if (gDiff > 0) {\n            $answer.add($menuClip).css({ bottom: gDiff });} else \n        {\n            $answer.add($menuClip).css({ bottom: 0 });}\n\n        if (space > 0) {\n            $('.spacie').css({ \n                position: 'relative' });\n\n            $historyLog.css({ \n                \"max-height\": $answer[0].getBoundingClientRect().top - $historyLog[0].getBoundingClientRect().top - 30 });\n\n            $menuClip.css({ \n                position: 'fixed', \n                width: $DOC.data('fixedFloatWidth'), \n                top: 20, \n                left: $DOC.data('fixedFloatLeft') });\n\n            $menuClip.find('.panel').css({ \n                'box-shadow': '0 0 8px rgba(0, 0, 0, 0.16)' });} else \n\n        {\n            $menuClip.css({ \n                position: '', \n                width: '', \n                top: '', \n                left: '', \n                'box-shadow': '' });\n\n            $menuClip.find('.panel').css({ \n                'box-shadow': '' });\n\n            $('.spacie').css({ \n                position: 'absolute', \n                height: $menuClip.outerHeight(true) });}}}\n\n\n\n\n\nfunction gPanelButtonPressedAction() {\n    $('.card_message').removeClass('selected');\n    var $this = $(this);\n    if ($this.attr('id') === 'rules') {\n        overlayAction('rules');\n        return;}\n\n    if ($this.attr('id') === 'giveup') {\n        $('.giveup_confirmation').addClass('selected');} else \n    if ($this.attr('id') === 'restart') {\n        $('.restart_confirmation').addClass('selected');} else \n    if ($this.attr('id') === 'share') {\n        $('.sharingsux').addClass('selected');}\n\n    openCard();}\n\n\nfunction disable(jQueryObj) {\n    return jQueryObj.attr('disabled', 'true');}\n\n\nfunction enable(jQueryObj) {\n    return jQueryObj.removeAttr('disabled');}\n\n\nfunction TitleObject(str) {\n    this.origString = str;\n    this.origTokens = str.match(/\\S+/g); //original chars/punct\n    this.normTokens = \n    diacritics2url.replaceDiacritics(str.toLowerCase().replace(STD_PUNCT, '')).\n    match(/\\S+/g);\n    this.wordTokens = str.replace(SEP_PUNCT, '').match(/\\S+/g);\n    this.guessed = zeroArray(this.origTokens.length);}\n\n\nfunction slide() {\n    var $this = $(this), \n    $widgetHeader = $('.widget_header'), \n    $widgetHeaderAndGuessSection = $widgetHeader.add('.guessSection'), \n    $answer = $('.answer'), \n    $menuClip = $('.menu_clip'), \n    $topHeader = $('.top_header'), \n    $widgetHeaderAndI = $widgetHeader.find('i'), \n    $widgetHeaderAndBand = $widgetHeader.find('.band'), \n    $slidingUpMobile = $('.sliding_up_mobile');\n\n    $slidingUpMobile.css({ \n        \"transform\": \"translate(0,0)\" });\n\n    if (!$this.prop('checked')) {\n        $slidingUpMobile.animate({ \n            \"transform\": \"translate(0,0)\" }, \n        500, 'swing', function () {\n            $widgetHeaderAndGuessSection.css({ \n                'box-shadow': 'none' });\n\n            $answer.css({ \n                'box-shadow': '0 0 10px rgba(0, 0, 0, 0.16)' });\n\n            $menuClip.add($topHeader).removeAttr('style');});\n\n\n        $widgetHeaderAndI.css({ \n            \"transform\": \"rotate(0deg)\" });\n\n        $widgetHeaderAndBand.css({ \n            'border-bottom': '.5px solid #8a8a89' });} else \n\n\n    {\n        closeCard();\n        $menuClip.css({ \n            \"z-index\": 1 });\n\n        $topHeader.css({ \n            \"z-index\": 1 });\n\n        $slidingUpMobile.css({ \n            \"transform\": \"translate(0,-\" + $('.menu').height() + \"px)\" });\n\n        $widgetHeaderAndI.css({ \n            \"transform\": \"rotate(180deg)\" });\n\n        $widgetHeaderAndBand.css({ \n            'border-bottom': 'none' });\n\n        $widgetHeaderAndGuessSection.css({ \n            'box-shadow': '0 0 10px rgba(0, 0, 0, 0.16)' });\n\n        $answer.css({ \n            'box-shadow': 'none' });}}\n\n\n\n\nfunction openOverlay() {\n    $('.overlay').height('100%');}\n\n\nfunction closeOverlay() {\n    $('.overlay').height('0');}\n\n\nfunction asyncQueryForRandomUsablePage(pageid) {\n    /* request random article and see if it has enough usable images*/\n    var pageid = pageid || null;\n    var newURL;\n    if (pageid != null) {\n        newURL = 'https://www.wikihow.com/api.php?action=query&format=json&prop=info%7Cimages&pageids=' + pageid + '&inprop=url&imlimit=100';} else \n    {\n        newURL = 'https://www.wikihow.com/api.php?action=query&format=json&prop=info%7Cimages&generator=random&inprop=url&imlimit=100&grnnamespace=0#';}\n\n\n\n    return $.ajax({ //get random page using mediawiki API\n        url: newURL, \n        dataType: 'jsonp' }).\n    then(function (data) {\n        /*The mediawiki api answers our request with a complex json object structure.\n         However, all of the data we're interested in is kept in a sub-object, \"pageInfo\"\n         Accessing it requires making this series of calls:\n         var page = jsonpData.query.pages;\n         var pageId = Object.keys(page)[0];\n         var pageInfo = page[pageId.toString()];\n         This is condensed to the lines below: */\n        var pageInfo = data.query.pages[Object.keys(data.query.pages)[0].toString()];\n        console.log(pageInfo);\n        console.log(pageInfo.fullurl);\n        console.log(pageInfo.images);\n        filterUnusableImages(pageInfo.images);\n\n\n        if (pageInfo.images == null || // == is intentional, checks for undefined\n        pageInfo.images.length < MIN_PAGE_IMAGES || \n        pageInfo.title.length > 256) {\n\n            return asyncQueryForRandomUsablePage(); //try again\n        }\n        return pageInfo;});}\n\n\n\nfunction asyncQueryForPageImages(pageInfo) {\n    return $.ajax({ //make another async. request for image urls\n        url: synthImageInfoQuery(pageInfo.images), \n        dataType: 'jsonp' }).\n    then(function (data) {\n        //create array and fill w/ slightly more accessable image data\n        var images = [];\n        var keys = Object.keys(data.query.pages);\n\n        for (var i = 0; i < keys.length; i++) {\n            //put image objects in new array\n            if (keys[i] > 0) {//missing images have ids of -1; don't include\n                var current = data.query.pages[keys[i].toString()];\n                images.push(current);}}\n\n\n        return images;});}\n\n\n\nfunction addImageToDocument() {\n    var images = $DOC.data('undisplayedImages');\n    if (images.length !== 0) {\n        var $wrap = $('.wrap');\n        var randIndex = Math.floor(Math.random() * images.length);\n        var nextImageInfo = images[randIndex].imageinfo[0];\n\n        images.splice(randIndex, 1); //removes used image from array and shifts all subsequent indexes down 1\n\n        var wrappedImage = getNewImageHtml(nextImageInfo);\n        $wrap.append(wrappedImage);\n        incrementCounter('numImageHints');\n\n        $(wrappedImage.find('img')[0]).unveil(0, function () {\n            $(this).load(function () {\n                scrollAction();});});\n\n\n        if (images.length < 1) {\n            disable($(this)); //disable button calling this as a listener funct.\n        }} else \n        {\n            disable($(this));}}\n\n\n\n\nfunction giveWordHint() {\n    console.log(\"lol\");\n    var title = $DOC.data('wikiPageTitle');\n    var tmp = [];\n    for (var i = title.normTokens.length - 1; i >= 0; i--) {\n        if (title.guessed[i] === 0) {\n            tmp.push(i);}}\n\n\n    if (tmp.length >= 1) {\n        var n = Math.floor(Math.random() * tmp.length);\n        title.guessed[tmp[n]]++;\n        incrementCounter('numWordHints');\n\n        addNewGoodWords(makeWordNode(title.wordTokens[tmp[n]]), 'slow');\n        if (tmp.length === 1) {\n            disable($(this)); //disable button calling this as a listener funct.\n        }} else \n        {\n            disable($(this)); //disable button calling this as a listener funct.\n        }}\n\n\nfunction addImagesToDocument(images, _) {//argument _ is extra passed in from $.when().done()\n    var $wrap = $('.wrap');\n    $DOC.data('undisplayedImages', images);\n    for (var i = 0; i < NUM_INITIAL_IMAGES && images.length !== 0; i++) {\n        var randIndex = Math.floor(Math.random() * images.length), \n        nextImageInfo = images[randIndex].imageinfo[0];\n        images.splice(randIndex, 1); //removes used image from array and shifts all subsequent indexes down 1\n\n        var wrappedImage = getNewImageHtml(nextImageInfo);\n        $wrap.append(wrappedImage);\n        $(wrappedImage.find('img')[0]).unveil(0, function () {\n            $(this).load(function () {\n                scrollAction();});});}}\n\n\n\n\n\n/*getNewImageHtml returns a new jQ node representing the input image\n wrapped in a page image wrapper*/\nfunction getNewImageHtml(nextImageInfo) {\n    var ret = $('<div class=\"box_wrapper floatyWrapper row\"></div>'), \n    unveilImgTag = $('<img class=\"pageImage u-max-full-width\" src=\"/images/ring.gif\"/>');\n\n    ret.resize(function () {\n        console.log(\"HEYYYY\");\n        resizeAction();});\n\n    // TODO: make media delivery responsive/make sense (this isn't quite it)\n    // if (!isGridActive()) {\n    //     unveilImgTag.attr('data-src', nextImageInfo.thumburl);\n    //     console.log('thumb');\n    // } else {\n    unveilImgTag.attr('data-src', nextImageInfo.url);\n    // }\n    return ret.append(unveilImgTag);}\n\n\n/*focusedAction fires when text input gains focus.\n If the default message was present, it is cleared.\n The text color is set to its normal value (as opposed to the\n greyed-out color of the default message).\n */\nfunction focusedAction() {\n    var $this = $(this);\n\n    /*NOTE: hard coded color value of focused textbox text*/\n    $this.css({ color: '#222', 'font-style': 'normal' });\n    if ($this.val() === DEFAULT_INPUT_MESSAGE) {\n        $this.val('');}}\n\n\n\n/*keyupAction fires when a key is released while typing in text input.\n Enables/disables submit button based on presence of text*/\nfunction keyupAction() {\n    if ($(this).val() !== '') \n    enable($('.guessSubmit'));else \n\n    disable($('.guessSubmit'));}\n\n\n/*blurAction fires when text input loses focus.\n Enables/disables submit button in the same way as keyupAction.\n If input is empty, replaces the default message text and styling*/\nfunction blurAction() {\n    var $this = $(this);\n    if ($this.val() !== '') \n    enable($('.guessSubmit'));else \n    {\n        $this.val(DEFAULT_INPUT_MESSAGE);\n        $this.css({ color: '#8a8a89', 'font-style': 'italic' });\n        disable($('.guessSubmit'));}}\n\n\n\n/*submitAction is called when a guess is submitted\n Guess info is obtained by looking at the value of the textbox.\n Updates to guess history and known words are performed.\n The menu is scrolled to put the new history entry into view.*/\nfunction submitAction() {\n    var $menu = $('.menu'), \n    str = $('.textField').val(), \n    guess = new TitleObject(str.replace(/^\\s*how\\s+to\\s+/gi, '')), \n    title = $DOC.data('wikiPageTitle');\n\n    if (isGridActive()) {\n        if (updateMenu(guess, 'slow', 'slow')) {\n            overlayAction('win');}} else \n\n    {\n        if (updateMenuMobile(guess, 'slow', 'slow')) {\n            overlayAction('win');}}\n\n\n    $('.textField').val('');}\n\n\nfunction overlayAction(type) {\n    makeOverlay(type);\n    openOverlay();}\n\n\nfunction makeOverlay(type) {\n\n    var $overlayInfoWrapper = $('.overlay_info_wrapper');\n    var $overlayInfo = $overlayInfoWrapper.find('.overlay_info');\n    var $winScreen = $('.win_screen');\n\n    $overlayInfo.hide();\n    $overlayInfoWrapper.removeClass('contains_attribs').removeClass('contains_win_screen').removeClass('contains_rules_screen');\n    switch (type) {\n        case 'win':\n            $('.score').show();\n            $overlayInfoWrapper.addClass('contains_win_screen');\n            $winScreen.show().find('h2').text('Yep!');\n            // $('.win_screen h2').text('Yep!');\n            $winScreen.find('h2 + h6').html('<i>Of course</i> we\\'re learning');\n            // $('.win_screen h2 + h6').html('<i>Of course</i> we\\'re learning');\n            var $contains_win_screen = $('.contains_win_screen');\n            $contains_win_screen.css({ top: ($(window).height() - $contains_win_screen.outerHeight(true)) / 2 });\n            break;\n        case 'loss':\n            $('.score').hide();\n            $overlayInfoWrapper.addClass('contains_win_screen');\n            $winScreen.show().find('h2').text('¯\\\\_(ツ)_/¯');\n            // $('.win_screen h2').text('¯\\\\_(ツ)_/¯');\n\n            $winScreen.find('h2 + h6').html('We were clearly going for');\n            // $('.win_screen h2 + h6').html('We were clearly going for');\n\n            var $contains_win_screen = $('.contains_win_screen');\n            $contains_win_screen.css({ top: ($(window).height() - $contains_win_screen.outerHeight(true)) / 2 });\n            break;\n        case 'about':\n            $overlayInfoWrapper.addClass('contains_attribs');\n            $('.attribs').show();\n            break;\n        case 'rules':\n            $overlayInfoWrapper.addClass('contains_rules_screen');\n            $('.rules_screen').show();\n            break;}}\n\n\n\nfunction initializeCounters() {\n    $('.counter').data('num', 0);\n    $('#numImageHints').data('num', NUM_INITIAL_IMAGES);\n\n    $('#numImageHints').data('labelInfo', ['image', 'images']);\n    $('#numWordHints').data('labelInfo', ['hint', 'hints']);\n    $('.numGuesses').data('labelInfo', ['try', 'tries']);\n    $('#numWords').data('outof', $DOC.data('wikiPageTitle').normTokens.length);\n\n    $('.counter').text('0');\n    $('#numImageHints').text(NUM_INITIAL_IMAGES);\n    $('#numWords').text('(0/' + $('#numWords').data('outof') + ')');}\n\n\nfunction incrementCounter(counterID) {\n    var $counter = counterID === 'numGuesses' ? $('.' + counterID) : $('#' + counterID), \n    oldnum = $counter.data('num');\n\n    $counter.data('num', oldnum + 1);\n    $counter.text(oldnum + 1);\n\n    if (counterID === 'numWords') {\n        var outof = $counter.data('outof');\n        if (oldnum + 1 !== 0) {\n            $('.empty_message').remove();}\n\n        $counter.text('(' + (oldnum + 1) + '/' + outof + ')');}\n\n\n    var labelInfo = $counter.data('labelInfo');\n    if (labelInfo) {\n        var $label = $('#' + counterID + '_label');\n        if (oldnum + 1 === 1) {\n            $label.text(labelInfo[0]);} else \n        if (oldnum + 1 === 2) {\n            $label.text(labelInfo[1]);}}}\n\n\n\n\nfunction insertableElementClickAction() {\n    var $textField = $('.textField');\n\n    $textField.focus();\n    if ($textField.val() === '') {\n        $textField.val($(this).text().trim());} else \n    {\n        $textField.val($textField.val() + ' ' + $(this).text().trim());}}\n\n\n\n/*updateMenu delegates the creation of new DOM nodes for the guess\n and coordinates their addition to the document with respect to their\n elements' animation speeds*/\nfunction updateMenu(guess, slideDuration, fadeDuration) {\n    var newHtml = getNewMenuHtml(guess, $DOC.data('wikiPageTitle'));\n    addNewGoodWords(newHtml.words, fadeDuration);\n    addNewGuessHistory(newHtml.hist, slideDuration, fadeDuration);\n    return newHtml.win;}\n\n\nfunction updateMenuMobile(guess, slideDuration, fadeDuration) {\n    if (!$('.toggle').prop('checked')) \n    $('.toggle').trigger('click');\n    return updateMenu(guess, slideDuration, fadeDuration);}\n\n\n/*getNewMenuHtml goes through the new guess word-by-word and creates\n the DOM nodes that will display them. All words are explicitly added as\n text nodes (to avoid xss), and correct words are wrapped in an extra <span>\n for highlighting. Newly guessed correct words are also packaged into\n elements for the list of good words. Results returned in object containing\n an sNode (single jQuery node with the new history entry) and a wNodeList\n (possibly empty array of jQuery selectable_container-class nodes each\n representing a new good word)*/\nfunction getNewMenuHtml(guess, title) {\n    var sNode = $('<div class=\"guess_container\"><div class=\"inner menuText\"></div></div><hr>'), \n    inner = sNode.find('.inner'), \n    wNodeList = [], \n    s = '', \n    win = guess.normTokens.length === title.normTokens.length;\n\n    for (var i = 0; i < guess.normTokens.length; i++) {\n        for (var j = 0; j < title.normTokens.length; j++) {\n            if (i === j && guess.normTokens[i] !== title.normTokens[j]) {\n                win = false;}\n\n            if (guess.normTokens[i] === title.normTokens[j]) {\n                inner.append(document.createTextNode(s));\n                s = '';\n                var gw = $('<em></em>').text(guess.origTokens[i].trim() + ' ');\n                gw.click(insertableElementClickAction);\n                inner.append(gw);\n                if (title.guessed[j] === 0) {\n                    wNodeList.push(makeWordNode(title.origTokens[j]));}\n\n                guess.guessed[i]++;\n                title.guessed[j]++;\n                break;} else \n            if (j === title.normTokens.length - 1) {//no match & this is last time comparing this guess tok\n                s = s + guess.origTokens[i] + ' ';}}}\n\n\n\n    inner.append(document.createTextNode(s));\n    return { 'words': wNodeList.reverse(), 'hist': sNode, 'win': win };}\n\n\n/*addNewGuessHistory animates the new guess history entry element node\n into the history list in the menu. New entry fades in over fadeDuration\n while older entries slide down over slideDuration*/\nfunction addNewGuessHistory(histNode, slideDuration, fadeDuration) {\n    incrementCounter('numGuesses');\n    $('.empty_message_hist').remove();\n    $(histNode).hide().prependTo('.history_log').slideDown(\n    slideDuration).fadeIn(fadeDuration);}\n\n\n/*addNewGoodWords iterates over the list of new good word nodes and fades\n each one into the document over a specified fadeDuration*/\nfunction addNewGoodWords(wordNodeList, fadeDuration) {\n\n    for (var i = wordNodeList.length - 1; i >= 0; i--) {\n        $(wordNodeList[i]).hide().appendTo('.good_words').fadeIn('fadeDuration');\n        incrementCounter('numWords');}}\n\n\n\n/*makeWordNode returns a \"good_word\"-style jQ node with input text string*/\nfunction makeWordNode(word) {\n    var sock = $('<div class=\"selectable_container\"><span class=\"word menuText\"></span></div>'), \n    tmp = sock.find('.word')[0];\n    $(tmp).text(word);\n    $(tmp).click(insertableElementClickAction);\n    return sock;}\n\n\n/*zeroArray returns a new zero-filled array of length l*/\nfunction zeroArray(l) {\n    var res = new Array(l);\n    while (--l >= 0) {\n        res[l] = 0;}\n\n    return res;}\n\n\n/*isUnusableImage checks the title of an image against a collection of\n titles known to belong to junk images (found in UnusableImages.scripts).\n Returns true if a match is identified.\n Unusable (junk) images are parts of wikihow page templates that the server\n returns alongside actual article images*/\nfunction isUnusableImage(imageTitle) {\n    for (var i = UNUSABLE_IMAGES.length - 1; i >= 0; i--) {\n        if (UNUSABLE_IMAGES[i] === imageTitle) {\n            return true;}}\n\n\n    return false;}\n\n\n/*filterUnusableImages iterates through a list of images, calling\n isUnusableImage on the title of each one. If an image is found to be\n unusable, it is removed from the array and discarded.\n This method modifies the input directly and does not have a return value*/\nfunction filterUnusableImages(imageArray) {\n    if (imageArray != null) {// != is intentional, checks for undefined\n        for (var i = imageArray.length - 1; i >= 0; i--) {\n            if (isUnusableImage(imageArray[i].title)) \n            imageArray.splice(i, 1);}}}\n\n\n\n\n/*synthImageInfoQuery returns a url-encoded string written to query\n wikihow's mediawiki api for source information on the specific\n images contained in the input list. */\nfunction synthImageInfoQuery(pageImages) {\n    //base url to query api for image sources\n    var queryUrl = \n    'https://www.wikihow.com/api.php?action=query&format=json&prop=imageinfo&titles=';\n    //append image titles seperated by '%7C' (url encoded '|')\n    for (var i = 0; i < pageImages.length; i++) {\n        queryUrl = queryUrl + pageImages[i].title;\n        if (i < pageImages.length - 1) \n        queryUrl = queryUrl + '%7C'; //url-encoded '|'\n        else \n            queryUrl = queryUrl + '&iiprop=url%7Csize&iiurlwidth=500'; //additional query properties\n    }\n    queryUrl = queryUrl.replace(/ /g, '+'); //url-encode spaces\n    return queryUrl;}\n//# sourceMappingURL=data:application/json;base64,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LENBQVgsQztBQUNBLFdBQU8sUUFBUCxDQUNIIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgU1REX1BVTkNUICAgICAgICAgICAgID0gL1tcXCchXCIjJCUmKCkqKyxcXC0uXFwvOjs8PT4/QFxcW1xcXV5fYHt8fX5dL2csXG4gICAgU0VQX1BVTkNUICAgICAgICAgICAgID0gL1tcIigpLDw+P0BcXFtcXF1fe31dL2csXG4gICAgTlVNX0lOSVRJQUxfSU1BR0VTICAgID0gMixcbiAgICBNSU5fUEFHRV9JTUFHRVMgICAgICAgPSA0LCAvL211c3QgYmUgPj0gTlVNX0lOSVRJQUxfSU1BR0VTXG4gICAgREVGQVVMVF9JTlBVVF9NRVNTQUdFID0gJ0hvdyB0by4uLicsXG4gICAgJERPQyAgICAgICAgICAgICAgICAgID0gJChkb2N1bWVudCksXG4gICAgbGlua2VkUGFnZUlkICAgICAgICAgID0gZ2V0UGFnZVBhcmFtZXRlcigpLFxuICAgIHByb21pc2VkVXNhYmxlUGFnZSAgICA9IGFzeW5jUXVlcnlGb3JSYW5kb21Vc2FibGVQYWdlKGxpbmtlZFBhZ2VJZCk7XG52YXIgZ0ZpcnN0U2Nyb2xsICA9IGZhbHNlLFxuICAgIGdEaWZmICAgICAgICAgPSAwLFxuICAgIGdNb2JpbGVMYXlvdXQgPSAhaXNHcmlkQWN0aXZlKCk7XG5cbnZhciBzdHlsZXMyTnVrZSA9IFtdO1xuXG4kLndoZW4oIC8vY29vcmRpbmF0ZXMgcGFnZSBsb2FkaW5nIChhIG1hc3RlcnBpZWNlKVxuICAgIHByb21pc2VkVXNhYmxlUGFnZS50aGVuKGFzeW5jUXVlcnlGb3JQYWdlSW1hZ2VzKSxcbiAgICAkRE9DLmRhdGEoJ3JlYWR5RGVmZXJyZWQnKVxuKS5kb25lKGFkZEltYWdlc1RvRG9jdW1lbnQpO1xuXG4kRE9DLmRhdGEoJ3JlYWR5RGVmZXJyZWQnLCAkLkRlZmVycmVkKCkpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJHRleHRGaWVsZCA9ICQoJy50ZXh0RmllbGQnKSxcbiAgICAgICAgJHRvZyAgICAgICA9ICQoJy50b2dnbGUnKSxcbiAgICAgICAgJGdhbWVwYW5lbCA9ICQoJy5nYW1lLnBhbmVsJyk7XG5cbiAgICAkLndoZW4ocHJvbWlzZWRVc2FibGVQYWdlKS5kb25lKHBhZ2VGb3VuZEFjdGlvbik7XG5cbiAgICAkRE9DLmRhdGEoJ3JlYWR5RGVmZXJyZWQnKS5yZXNvbHZlKCk7XG5cbiAgICAkRE9DLmRhdGEoJ2ZpeGVkRmxvYXRXaWR0aCcsICRnYW1lcGFuZWwud2lkdGgoKSk7XG4gICAgJERPQy5kYXRhKCdmaXhlZEZsb2F0TGVmdCcsICRnYW1lcGFuZWwub2Zmc2V0KCkubGVmdCk7XG5cbiAgICAkKHdpbmRvdykuc2Nyb2xsKHNjcm9sbEFjdGlvbik7XG4gICAgJCh3aW5kb3cpLnJlc2l6ZShyZXNpemVBY3Rpb24pO1xuICAgICRET0MucmVzaXplKHJlc2l6ZUFjdGlvbik7XG4gICAgdmFyICRwYW5lbF9idXR0b25zID0gJCgnLmdiJyk7XG4gICAgLy8gJHBhbmVsX2J1dHRvbnMuYmx1cihnUGFuZWxCdXR0b25CbHVyQWN0aW9uKTtcbiAgICAkcGFuZWxfYnV0dG9ucy5jbGljayhnUGFuZWxCdXR0b25QcmVzc2VkQWN0aW9uKTtcblxuICAgICQoJyNpbWFnZWhpbnQnKS5jbGljayhhZGRJbWFnZVRvRG9jdW1lbnQpO1xuICAgICQoJyN3b3JkaGludCcpLmNsaWNrKGdpdmVXb3JkSGludCk7XG4gICAgJCgnLmNhcmRfb3ZlcmxheSwgYnV0dG9uLmNhcmRfY2xvc2UnKS5jbGljayhjbG9zZUNhcmQpO1xuXG4gICAgJHRleHRGaWVsZC5mb2N1cyhmb2N1c2VkQWN0aW9uKTtcbiAgICAkdGV4dEZpZWxkLmtleXVwKGtleXVwQWN0aW9uKTtcbiAgICAkdGV4dEZpZWxkLmJsdXIoYmx1ckFjdGlvbik7XG4gICAgJHRvZy5jaGFuZ2Uoc2xpZGUpO1xuXG4gICAgJCgnLmNsb3NlX2xpbmsnKS5jbGljayhjbG9zZU92ZXJsYXkpO1xuICAgICQoJy5jb3B5X2xpbmsnKS5jbGljayhjb3B5VVJMKTtcbiAgICAkKCcuYWJvdXQnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIG92ZXJsYXlBY3Rpb24oJ2Fib3V0Jyk7XG4gICAgfSk7XG4gICAgLy8gJCgnLnRvcF9oZWFkZXInKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgLy8gICAgIG92ZXJsYXlBY3Rpb24oJ3dpbicpO1xuICAgIC8vIH0pO1xuICAgICQoJy5jYXJkX2dpdmV1cCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb3ZlcmxheUFjdGlvbignbG9zcycpO1xuICAgIH0pO1xufSk7IC8vRW5kICRET0MucmVhZHlcblxuZnVuY3Rpb24gZ2V0UGFnZVBhcmFtZXRlcigpIHtcbiAgICB2YXIgcXVlcnlTdHJpbmdQYXJhbXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKS5zcGxpdCgnJicpO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBxdWVyeVN0cmluZ1BhcmFtcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgcGFyYW0gPSBxdWVyeVN0cmluZ1BhcmFtc1tpXS5zcGxpdCgnPScpO1xuICAgICAgICBpZiAocGFyYW1bMF0gPT09ICdwJykge1xuICAgICAgICAgICAgcmV0dXJuIHBhcmFtWzFdO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY29weVVSTCgpIHtcbiAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnZW5kX3NjcmVlbicpKSB7XG4gICAgICAgIHZhciAkdXJsX3RleHQgPSAkKCcudXJsX3RleHQuZW5kX3NjcmVlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciAkdXJsX3RleHQgPSAkKCcudXJsX3RleHQuc2hhcmVfc2NyZWVuJyk7XG4gICAgfVxuICAgICR1cmxfdGV4dC5mb2N1cygpO1xuICAgICR1cmxfdGV4dC5zZWxlY3QoKTtcbiAgICBkb2N1bWVudC5leGVjQ29tbWFuZChcImNvcHlcIik7XG4gICAgJCgnLmNvcHlfdG9vbHRpcF90ZXh0JykudGV4dCgnQ29waWVkIScpO1xuXG59XG5cbmZ1bmN0aW9uIHBhZ2VGb3VuZEFjdGlvbihwYWdlSW5mbykge1xuICAgICRET0MuZGF0YSgnd2lraVBhZ2VUaXRsZScsIG5ldyBUaXRsZU9iamVjdChwYWdlSW5mby50aXRsZSkpO1xuICAgICRET0MuZGF0YSgnd2lraVBhZ2VJZCcsIHBhZ2VJbmZvLnBhZ2VpZCk7XG4gICAgJERPQy5kYXRhKCd3aWtpUGFnZVVSTCcsIHBhZ2VJbmZvLmZ1bGx1cmwpO1xuXG4gICAgdmFyIGRpcmVjdFVybCA9IGVuY29kZVVSSSh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyB3aW5kb3cubG9jYXRpb24uaG9zdCArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIFwiP3A9XCIgKyBwYWdlSW5mby5wYWdlaWQpO1xuXG4gICAgLy8gdmFyIHR3ZWV0SHJlZiA9ICdodHRwczovL3R3aXR0ZXIuY29tL2ludGVudC90d2VldD8nK2VuY29kZVVSSSgndGV4dD1XaWtpV2hhdD8mdXJsPScgKyBkaXJlY3RVcmwpO1xuICAgIC8vXG4gICAgLy8gJCgnLnR3aXR0ZXInKS5hdHRyKCdocmVmJywgdHdlZXRIcmVmKTtcbiAgICAvLyB2YXIgJGZiID0gJCgnLmZhY2Vib29rJyk7XG4gICAgLy8gdmFyIGZiaHJlZj0gJGZiLmF0dHIoJ2hyZWYnKTtcbiAgICAvLyAvLyAkKCcuZ29vZ2xlX3BsdXMnKS5hdHRyKCdocmVmJywgJ2h0dHBzOi8vcGx1c29uZS5nb29nbGUuY29tL18vKzEvY29uZmlybT9obD1lbiZ1cmw9aHR0cCUzQSUyRiUyRiUyMCcrZGlyZWN0VXJsKTtcbiAgICAvLyBjb25zb2xlLmxvZyhmYmhyZWYucmVwbGFjZSgnSU5TRVJUX1VSTF9IRVJFJywgZGlyZWN0VXJsKSk7XG4gICAgLy8gJGZiLmF0dHIoJ2hyZWYnLCBmYmhyZWYucmVwbGFjZSgnSU5TRVJUX1VSTF9IRVJFJywgZGlyZWN0VXJsKSk7XG4gICAgLy8gJCgnLmEyYV9raXQnKS5hdHRyKCdkYXRhLWEyYS11cmwnLCBkaXJlY3RVcmwpO1xuICAgICQoJy51cmxfdGV4dCcpLnZhbChkaXJlY3RVcmwpO1xuICAgIHByZXBhcmVPdmVybGF5KHBhZ2VJbmZvKTtcbiAgICBpbml0aWFsaXplQ291bnRlcnMoKTtcbn1cblxuXG5cbmZ1bmN0aW9uIG9wZW5DYXJkKCkge1xuICAgIG51a2VTdHlsZXMoKTtcbiAgICBpZiAoaXNHcmlkQWN0aXZlKCkpIHtcbiAgICAgICAgJCgnLm1lbnVfY2xpcCcpLmFkZENsYXNzKCdzbGlkJyk7XG4gICAgfVxuICAgICQoJy5jYXJkJykuYWRkQ2xhc3MoJ3NsaWQnKTtcbiAgICAkKCcuY2FyZF9vdmVybGF5JykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgJCgnLmNhcmRfY2xpcCcpLmFkZENsYXNzKCdoaWdoZXJaSW5kZXgnKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VDYXJkKCkge1xuICAgICQoJy5jYXJkX292ZXJsYXknKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLmNhcmRfbWVzc2FnZScpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgIH0sIDQwMCk7XG4gICAgJCgnLmNhcmQsIC5tZW51X2NsaXAnKS5yZW1vdmVDbGFzcygnc2xpZCcpO1xuXG4gICAgJCgnLmNhcmRfY2xpcCcpLnJlbW92ZUNsYXNzKCdoaWdoZXJaSW5kZXgnKTtcblxufVxuXG5mdW5jdGlvbiBwcmVwYXJlT3ZlcmxheShwYWdlSW5mbykge1xuICAgICQoJy5wYWdlX2xpbmsnKS5hdHRyKCdocmVmJywgcGFnZUluZm8uZnVsbHVybCkucHJlcGVuZCgnPHNwYW4+SG93IHRvICcgKyBwYWdlSW5mby50aXRsZSArICc8L3NwYW4+Jyk7XG59XG5cbmZ1bmN0aW9uIGlzR3JpZEFjdGl2ZSgpIHtcbiAgICByZXR1cm4gKCQoJy50cmltJykuY3NzKCdkaXNwbGF5JykgIT09ICdub25lJyk7XG59XG5cbmZ1bmN0aW9uIHJlc2l6ZUFjdGlvbigpIHtcbiAgICB2YXIgJGdhbWVwYW5lbCA9ICQoJy5wYW5lbC5nYW1lJyk7XG5cbiAgICBnRGlmZiA9ICRET0Muc2Nyb2xsVG9wKCkgKyAkKHdpbmRvdykuaGVpZ2h0KCkgLSAoJERPQy5oZWlnaHQoKSAtICQoJy5wYWdlX2Zvb3RlcicpLmhlaWdodCgpKTtcblxuICAgICRET0MuZGF0YSgnZml4ZWRGbG9hdFdpZHRoJywgJGdhbWVwYW5lbC53aWR0aCgpKTtcbiAgICAkRE9DLmRhdGEoJ2ZpeGVkRmxvYXRMZWZ0JywgJGdhbWVwYW5lbC5vZmZzZXQoKS5sZWZ0KTtcbiAgICBzY3JvbGxBY3Rpb24oKTtcbiAgICBpZiAoaXNHcmlkQWN0aXZlKCkpIHtcbiAgICAgICAgaWYgKGdNb2JpbGVMYXlvdXQpIHtcbiAgICAgICAgICAgIGdNb2JpbGVMYXlvdXQgPSBmYWxzZTtcbiAgICAgICAgICAgIG51a2VTdHlsZXMoKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghZ01vYmlsZUxheW91dCkge1xuICAgICAgICAgICAgZ01vYmlsZUxheW91dCA9IHRydWU7XG4gICAgICAgICAgICBudWtlU3R5bGVzKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIG51a2VTdHlsZXMoKSB7XG4gICAgaWYgKHN0eWxlczJOdWtlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB2YXIgJHdpZGdldGhlYWRlciA9ICQoJy53aWRnZXRfaGVhZGVyJyk7XG4gICAgICAgIHN0eWxlczJOdWtlLnB1c2goXG4gICAgICAgICAgICAkKCcuaGlzdG9yeV9sb2cnKSxcbiAgICAgICAgICAgICQoJy5tZW51X2NsaXAnKSxcbiAgICAgICAgICAgICQoJy5zbGlkaW5nX3VwX21vYmlsZScpLFxuICAgICAgICAgICAgJHdpZGdldGhlYWRlcixcbiAgICAgICAgICAgICR3aWRnZXRoZWFkZXIuZmluZCgnaScpLFxuICAgICAgICAgICAgJHdpZGdldGhlYWRlci5maW5kKCcuYmFuZCcpLFxuICAgICAgICAgICAgJCgnLmd1ZXNzU2VjdGlvbicpLFxuICAgICAgICAgICAgJCgnLnNwYWNpZScpXG4gICAgICAgICk7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSBzdHlsZXMyTnVrZS5sZW5ndGg7IGkgPD0gMDsgaS0tKSB7XG4gICAgICAgIHN0eWxlczJOdWtlW2ldLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgfVxuICAgICQoJy5hbnN3ZXInKS5jc3MoJ2JveC1zaGFkb3cnLCAnJyk7IC8vZG9uZSBzZXBhcmF0ZWx5IHRvIHByZXNlcnZlIGN1c3RvbSAnYm90dG9tJyBwcm9wXG4gICAgJCgnLnRvZ2dsZScpLnJlbW92ZUF0dHIoJ2NoZWNrZWQnKTtcbn1cblxuZnVuY3Rpb24gc2Nyb2xsQWN0aW9uKCkge1xuICAgIGlmICgkKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpLmhhc0NsYXNzKCdnYicpKSB7XG4gICAgICAgICQoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkuYmx1cigpO1xuICAgIH1cbiAgICBpZiAoaXNHcmlkQWN0aXZlKCkpIHtcbiAgICAgICAgaWYgKCFnRmlyc3RTY3JvbGwpIHtcbiAgICAgICAgICAgIGdGaXJzdFNjcm9sbCA9IHRydWU7XG4gICAgICAgICAgICByZXNpemVBY3Rpb24oKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgJGdhbWVwYW5lbCAgPSAkKCcuZ2FtZS5wYW5lbCcpLFxuICAgICAgICAgICAgJGhpc3RvcnlMb2cgPSAkKCcuaGlzdG9yeV9sb2cnKSxcbiAgICAgICAgICAgICRtZW51Q2xpcCAgID0gJCgnLm1lbnVfY2xpcCcpLFxuICAgICAgICAgICAgJGFuc3dlciAgICAgPSAkKCcuYW5zd2VyJyksXG4gICAgICAgICAgICBzcGFjZSAgICAgICA9ICQod2luZG93KS5zY3JvbGxUb3AoKSAtICgkZ2FtZXBhbmVsLm9mZnNldCgpLnRvcCArICRnYW1lcGFuZWwuaGVpZ2h0KCkpO1xuXG4gICAgICAgIGNsb3NlQ2FyZCgpO1xuICAgICAgICBnRGlmZiA9ICQod2luZG93KS5zY3JvbGxUb3AoKSArICQod2luZG93KS5oZWlnaHQoKSAtICQoJy5wYWdlX2Zvb3RlcicpLm9mZnNldCgpLnRvcDtcblxuICAgICAgICBpZiAoZ0RpZmYgPiAwKSB7XG4gICAgICAgICAgICAkYW5zd2VyLmFkZCgkbWVudUNsaXApLmNzcyh7Ym90dG9tOiBnRGlmZn0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGFuc3dlci5hZGQoJG1lbnVDbGlwKS5jc3Moe2JvdHRvbTogMH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcGFjZSA+IDApIHtcbiAgICAgICAgICAgICQoJy5zcGFjaWUnKS5jc3Moe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRoaXN0b3J5TG9nLmNzcyh7XG4gICAgICAgICAgICAgICAgXCJtYXgtaGVpZ2h0XCI6ICRhbnN3ZXJbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gJGhpc3RvcnlMb2dbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gMzBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJG1lbnVDbGlwLmNzcyh7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICAgICAgICAgICAgd2lkdGg6ICRET0MuZGF0YSgnZml4ZWRGbG9hdFdpZHRoJyksXG4gICAgICAgICAgICAgICAgdG9wOiAyMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiAkRE9DLmRhdGEoJ2ZpeGVkRmxvYXRMZWZ0JylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJG1lbnVDbGlwLmZpbmQoJy5wYW5lbCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgJ2JveC1zaGFkb3cnOiAnMCAwIDhweCByZ2JhKDAsIDAsIDAsIDAuMTYpJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbWVudUNsaXAuY3NzKHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJycsXG4gICAgICAgICAgICAgICAgd2lkdGg6ICcnLFxuICAgICAgICAgICAgICAgIHRvcDogJycsXG4gICAgICAgICAgICAgICAgbGVmdDogJycsXG4gICAgICAgICAgICAgICAgJ2JveC1zaGFkb3cnOiAnJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkbWVudUNsaXAuZmluZCgnLnBhbmVsJykuY3NzKHtcbiAgICAgICAgICAgICAgICAnYm94LXNoYWRvdyc6ICcnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoJy5zcGFjaWUnKS5jc3Moe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAgIGhlaWdodDogJG1lbnVDbGlwLm91dGVySGVpZ2h0KHRydWUpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZ1BhbmVsQnV0dG9uUHJlc3NlZEFjdGlvbigpIHtcbiAgICAkKCcuY2FyZF9tZXNzYWdlJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICBpZiAoJHRoaXMuYXR0cignaWQnKSA9PT0gJ3J1bGVzJykge1xuICAgICAgICBvdmVybGF5QWN0aW9uKCdydWxlcycpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICgkdGhpcy5hdHRyKCdpZCcpID09PSAnZ2l2ZXVwJykge1xuICAgICAgICAkKCcuZ2l2ZXVwX2NvbmZpcm1hdGlvbicpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgIH0gZWxzZSBpZiAoJHRoaXMuYXR0cignaWQnKSA9PT0gJ3Jlc3RhcnQnKSB7XG4gICAgICAgICQoJy5yZXN0YXJ0X2NvbmZpcm1hdGlvbicpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgIH0gZWxzZSBpZiAoJHRoaXMuYXR0cignaWQnKSA9PT0gJ3NoYXJlJykge1xuICAgICAgICAkKCcuc2hhcmluZ3N1eCcpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgIH1cbiAgICBvcGVuQ2FyZCgpO1xufVxuXG5mdW5jdGlvbiBkaXNhYmxlKGpRdWVyeU9iaikge1xuICAgIHJldHVybiBqUXVlcnlPYmouYXR0cignZGlzYWJsZWQnLCAndHJ1ZScpO1xufVxuXG5mdW5jdGlvbiBlbmFibGUoalF1ZXJ5T2JqKSB7XG4gICAgcmV0dXJuIGpRdWVyeU9iai5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xufVxuXG5mdW5jdGlvbiBUaXRsZU9iamVjdChzdHIpIHtcbiAgICB0aGlzLm9yaWdTdHJpbmcgPSBzdHI7XG4gICAgdGhpcy5vcmlnVG9rZW5zID0gc3RyLm1hdGNoKC9cXFMrL2cpOyAvL29yaWdpbmFsIGNoYXJzL3B1bmN0XG4gICAgdGhpcy5ub3JtVG9rZW5zID1cbiAgICAgICAgZGlhY3JpdGljczJ1cmwucmVwbGFjZURpYWNyaXRpY3Moc3RyLnRvTG93ZXJDYXNlKCkucmVwbGFjZShTVERfUFVOQ1QsICcnKSlcbiAgICAgICAgICAgIC5tYXRjaCgvXFxTKy9nKTtcbiAgICB0aGlzLndvcmRUb2tlbnMgPSBzdHIucmVwbGFjZShTRVBfUFVOQ1QsICcnKS5tYXRjaCgvXFxTKy9nKTtcbiAgICB0aGlzLmd1ZXNzZWQgPSB6ZXJvQXJyYXkodGhpcy5vcmlnVG9rZW5zLmxlbmd0aCk7XG59XG5cbmZ1bmN0aW9uIHNsaWRlKCkge1xuICAgIHZhciAkdGhpcyAgICAgICAgICAgICAgICAgICAgICAgID0gJCh0aGlzKSxcbiAgICAgICAgJHdpZGdldEhlYWRlciAgICAgICAgICAgICAgICA9ICQoJy53aWRnZXRfaGVhZGVyJyksXG4gICAgICAgICR3aWRnZXRIZWFkZXJBbmRHdWVzc1NlY3Rpb24gPSAkd2lkZ2V0SGVhZGVyLmFkZCgnLmd1ZXNzU2VjdGlvbicpLFxuICAgICAgICAkYW5zd2VyICAgICAgICAgICAgICAgICAgICAgID0gJCgnLmFuc3dlcicpLFxuICAgICAgICAkbWVudUNsaXAgICAgICAgICAgICAgICAgICAgID0gJCgnLm1lbnVfY2xpcCcpLFxuICAgICAgICAkdG9wSGVhZGVyICAgICAgICAgICAgICAgICAgID0gJCgnLnRvcF9oZWFkZXInKSxcbiAgICAgICAgJHdpZGdldEhlYWRlckFuZEkgICAgICAgICAgICA9ICR3aWRnZXRIZWFkZXIuZmluZCgnaScpLFxuICAgICAgICAkd2lkZ2V0SGVhZGVyQW5kQmFuZCAgICAgICAgID0gJHdpZGdldEhlYWRlci5maW5kKCcuYmFuZCcpLFxuICAgICAgICAkc2xpZGluZ1VwTW9iaWxlICAgICAgICAgICAgID0gJCgnLnNsaWRpbmdfdXBfbW9iaWxlJyk7XG5cbiAgICAkc2xpZGluZ1VwTW9iaWxlLmNzcyh7XG4gICAgICAgIFwidHJhbnNmb3JtXCI6IFwidHJhbnNsYXRlKDAsMClcIlxuICAgIH0pO1xuICAgIGlmICghJHRoaXMucHJvcCgnY2hlY2tlZCcpKSB7XG4gICAgICAgICRzbGlkaW5nVXBNb2JpbGUuYW5pbWF0ZSh7XG4gICAgICAgICAgICBcInRyYW5zZm9ybVwiOiBcInRyYW5zbGF0ZSgwLDApXCJcbiAgICAgICAgfSwgNTAwLCAnc3dpbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkd2lkZ2V0SGVhZGVyQW5kR3Vlc3NTZWN0aW9uLmNzcyh7XG4gICAgICAgICAgICAgICAgJ2JveC1zaGFkb3cnOiAnbm9uZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJGFuc3dlci5jc3Moe1xuICAgICAgICAgICAgICAgICdib3gtc2hhZG93JzogJzAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xNiknXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRtZW51Q2xpcC5hZGQoJHRvcEhlYWRlcikucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHdpZGdldEhlYWRlckFuZEkuY3NzKHtcbiAgICAgICAgICAgIFwidHJhbnNmb3JtXCI6IFwicm90YXRlKDBkZWcpXCJcbiAgICAgICAgfSk7XG4gICAgICAgICR3aWRnZXRIZWFkZXJBbmRCYW5kLmNzcyh7XG4gICAgICAgICAgICAnYm9yZGVyLWJvdHRvbSc6ICcuNXB4IHNvbGlkICM4YThhODknXG4gICAgICAgIH0pO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2xvc2VDYXJkKCk7XG4gICAgICAgICRtZW51Q2xpcC5jc3Moe1xuICAgICAgICAgICAgXCJ6LWluZGV4XCI6IDFcbiAgICAgICAgfSk7XG4gICAgICAgICR0b3BIZWFkZXIuY3NzKHtcbiAgICAgICAgICAgIFwiei1pbmRleFwiOiAxXG4gICAgICAgIH0pO1xuICAgICAgICAkc2xpZGluZ1VwTW9iaWxlLmNzcyh7XG4gICAgICAgICAgICBcInRyYW5zZm9ybVwiOiBcInRyYW5zbGF0ZSgwLC1cIiArICQoJy5tZW51JykuaGVpZ2h0KCkgKyBcInB4KVwiXG4gICAgICAgIH0pO1xuICAgICAgICAkd2lkZ2V0SGVhZGVyQW5kSS5jc3Moe1xuICAgICAgICAgICAgXCJ0cmFuc2Zvcm1cIjogXCJyb3RhdGUoMTgwZGVnKVwiXG4gICAgICAgIH0pO1xuICAgICAgICAkd2lkZ2V0SGVhZGVyQW5kQmFuZC5jc3Moe1xuICAgICAgICAgICAgJ2JvcmRlci1ib3R0b20nOiAnbm9uZSdcbiAgICAgICAgfSk7XG4gICAgICAgICR3aWRnZXRIZWFkZXJBbmRHdWVzc1NlY3Rpb24uY3NzKHtcbiAgICAgICAgICAgICdib3gtc2hhZG93JzogJzAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xNiknXG4gICAgICAgIH0pO1xuICAgICAgICAkYW5zd2VyLmNzcyh7XG4gICAgICAgICAgICAnYm94LXNoYWRvdyc6ICdub25lJ1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG9wZW5PdmVybGF5KCkge1xuICAgICQoJy5vdmVybGF5JykuaGVpZ2h0KCcxMDAlJyk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlT3ZlcmxheSgpIHtcbiAgICAkKCcub3ZlcmxheScpLmhlaWdodCgnMCcpO1xufVxuXG5mdW5jdGlvbiBhc3luY1F1ZXJ5Rm9yUmFuZG9tVXNhYmxlUGFnZShwYWdlaWQpIHtcbiAgICAvKiByZXF1ZXN0IHJhbmRvbSBhcnRpY2xlIGFuZCBzZWUgaWYgaXQgaGFzIGVub3VnaCB1c2FibGUgaW1hZ2VzKi9cbiAgICB2YXIgcGFnZWlkID0gcGFnZWlkIHx8IG51bGw7XG4gICAgdmFyIG5ld1VSTDtcbiAgICBpZiAocGFnZWlkICE9IG51bGwpIHtcbiAgICAgICAgbmV3VVJMID0gJ2h0dHBzOi8vd3d3Lndpa2lob3cuY29tL2FwaS5waHA/YWN0aW9uPXF1ZXJ5JmZvcm1hdD1qc29uJnByb3A9aW5mbyU3Q2ltYWdlcyZwYWdlaWRzPScgKyBwYWdlaWQgKyAnJmlucHJvcD11cmwmaW1saW1pdD0xMDAnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld1VSTCA9ICdodHRwczovL3d3dy53aWtpaG93LmNvbS9hcGkucGhwP2FjdGlvbj1xdWVyeSZmb3JtYXQ9anNvbiZwcm9wPWluZm8lN0NpbWFnZXMmZ2VuZXJhdG9yPXJhbmRvbSZpbnByb3A9dXJsJmltbGltaXQ9MTAwJmdybm5hbWVzcGFjZT0wIyc7XG4gICAgfVxuXG5cbiAgICByZXR1cm4gJC5hamF4KHsgLy9nZXQgcmFuZG9tIHBhZ2UgdXNpbmcgbWVkaWF3aWtpIEFQSVxuICAgICAgICB1cmw6IG5ld1VSTCxcbiAgICAgICAgZGF0YVR5cGU6ICdqc29ucCdcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIC8qVGhlIG1lZGlhd2lraSBhcGkgYW5zd2VycyBvdXIgcmVxdWVzdCB3aXRoIGEgY29tcGxleCBqc29uIG9iamVjdCBzdHJ1Y3R1cmUuXG4gICAgICAgICBIb3dldmVyLCBhbGwgb2YgdGhlIGRhdGEgd2UncmUgaW50ZXJlc3RlZCBpbiBpcyBrZXB0IGluIGEgc3ViLW9iamVjdCwgXCJwYWdlSW5mb1wiXG4gICAgICAgICBBY2Nlc3NpbmcgaXQgcmVxdWlyZXMgbWFraW5nIHRoaXMgc2VyaWVzIG9mIGNhbGxzOlxuICAgICAgICAgdmFyIHBhZ2UgPSBqc29ucERhdGEucXVlcnkucGFnZXM7XG4gICAgICAgICB2YXIgcGFnZUlkID0gT2JqZWN0LmtleXMocGFnZSlbMF07XG4gICAgICAgICB2YXIgcGFnZUluZm8gPSBwYWdlW3BhZ2VJZC50b1N0cmluZygpXTtcbiAgICAgICAgIFRoaXMgaXMgY29uZGVuc2VkIHRvIHRoZSBsaW5lcyBiZWxvdzogKi9cbiAgICAgICAgdmFyIHBhZ2VJbmZvID0gZGF0YS5xdWVyeS5wYWdlc1tPYmplY3Qua2V5cyhkYXRhLnF1ZXJ5LnBhZ2VzKVswXS50b1N0cmluZygpXTtcbiAgICAgICAgY29uc29sZS5sb2cocGFnZUluZm8pO1xuICAgICAgICBjb25zb2xlLmxvZyhwYWdlSW5mby5mdWxsdXJsKTtcbiAgICAgICAgY29uc29sZS5sb2cocGFnZUluZm8uaW1hZ2VzKTtcbiAgICAgICAgZmlsdGVyVW51c2FibGVJbWFnZXMocGFnZUluZm8uaW1hZ2VzKTtcblxuXG4gICAgICAgIGlmIChwYWdlSW5mby5pbWFnZXMgPT0gbnVsbCB8fCAvLyA9PSBpcyBpbnRlbnRpb25hbCwgY2hlY2tzIGZvciB1bmRlZmluZWRcbiAgICAgICAgICAgIHBhZ2VJbmZvLmltYWdlcy5sZW5ndGggPCBNSU5fUEFHRV9JTUFHRVMgfHxcbiAgICAgICAgICAgIHBhZ2VJbmZvLnRpdGxlLmxlbmd0aCA+IDI1Nikge1xuXG4gICAgICAgICAgICByZXR1cm4gYXN5bmNRdWVyeUZvclJhbmRvbVVzYWJsZVBhZ2UoKTsgLy90cnkgYWdhaW5cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFnZUluZm87XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGFzeW5jUXVlcnlGb3JQYWdlSW1hZ2VzKHBhZ2VJbmZvKSB7XG4gICAgcmV0dXJuICQuYWpheCh7IC8vbWFrZSBhbm90aGVyIGFzeW5jLiByZXF1ZXN0IGZvciBpbWFnZSB1cmxzXG4gICAgICAgIHVybDogc3ludGhJbWFnZUluZm9RdWVyeShwYWdlSW5mby5pbWFnZXMpLFxuICAgICAgICBkYXRhVHlwZTogJ2pzb25wJ1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgLy9jcmVhdGUgYXJyYXkgYW5kIGZpbGwgdy8gc2xpZ2h0bHkgbW9yZSBhY2Nlc3NhYmxlIGltYWdlIGRhdGFcbiAgICAgICAgdmFyIGltYWdlcyA9IFtdO1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEucXVlcnkucGFnZXMpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy9wdXQgaW1hZ2Ugb2JqZWN0cyBpbiBuZXcgYXJyYXlcbiAgICAgICAgICAgIGlmIChrZXlzW2ldID4gMCkgeyAvL21pc3NpbmcgaW1hZ2VzIGhhdmUgaWRzIG9mIC0xOyBkb24ndCBpbmNsdWRlXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBkYXRhLnF1ZXJ5LnBhZ2VzW2tleXNbaV0udG9TdHJpbmcoKV07XG4gICAgICAgICAgICAgICAgaW1hZ2VzLnB1c2goY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGltYWdlcztcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gYWRkSW1hZ2VUb0RvY3VtZW50KCkge1xuICAgIHZhciBpbWFnZXMgPSAkRE9DLmRhdGEoJ3VuZGlzcGxheWVkSW1hZ2VzJyk7XG4gICAgaWYgKGltYWdlcy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgdmFyICR3cmFwID0gJCgnLndyYXAnKTtcbiAgICAgICAgdmFyIHJhbmRJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGltYWdlcy5sZW5ndGgpO1xuICAgICAgICB2YXIgbmV4dEltYWdlSW5mbyA9IGltYWdlc1tyYW5kSW5kZXhdLmltYWdlaW5mb1swXTtcblxuICAgICAgICBpbWFnZXMuc3BsaWNlKHJhbmRJbmRleCwgMSk7IC8vcmVtb3ZlcyB1c2VkIGltYWdlIGZyb20gYXJyYXkgYW5kIHNoaWZ0cyBhbGwgc3Vic2VxdWVudCBpbmRleGVzIGRvd24gMVxuXG4gICAgICAgIHZhciB3cmFwcGVkSW1hZ2UgPSBnZXROZXdJbWFnZUh0bWwobmV4dEltYWdlSW5mbyk7XG4gICAgICAgICR3cmFwLmFwcGVuZCh3cmFwcGVkSW1hZ2UpO1xuICAgICAgICBpbmNyZW1lbnRDb3VudGVyKCdudW1JbWFnZUhpbnRzJyk7XG5cbiAgICAgICAgJCh3cmFwcGVkSW1hZ2UuZmluZCgnaW1nJylbMF0pLnVudmVpbCgwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmxvYWQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNjcm9sbEFjdGlvbigpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpbWFnZXMubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgZGlzYWJsZSgkKHRoaXMpKTsgLy9kaXNhYmxlIGJ1dHRvbiBjYWxsaW5nIHRoaXMgYXMgYSBsaXN0ZW5lciBmdW5jdC5cbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGRpc2FibGUoJCh0aGlzKSk7XG4gICAgfVxuXG59XG5cbmZ1bmN0aW9uIGdpdmVXb3JkSGludCgpIHtcbiAgICBjb25zb2xlLmxvZyhcImxvbFwiKTtcbiAgICB2YXIgdGl0bGUgPSAkRE9DLmRhdGEoJ3dpa2lQYWdlVGl0bGUnKTtcbiAgICB2YXIgdG1wID0gW107XG4gICAgZm9yICh2YXIgaSA9IHRpdGxlLm5vcm1Ub2tlbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKHRpdGxlLmd1ZXNzZWRbaV0gPT09IDApIHtcbiAgICAgICAgICAgIHRtcC5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh0bXAubGVuZ3RoID49IDEpIHtcbiAgICAgICAgdmFyIG4gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0bXAubGVuZ3RoKTtcbiAgICAgICAgdGl0bGUuZ3Vlc3NlZFt0bXBbbl1dKys7XG4gICAgICAgIGluY3JlbWVudENvdW50ZXIoJ251bVdvcmRIaW50cycpO1xuXG4gICAgICAgIGFkZE5ld0dvb2RXb3JkcyhtYWtlV29yZE5vZGUodGl0bGUud29yZFRva2Vuc1t0bXBbbl1dKSwgJ3Nsb3cnKTtcbiAgICAgICAgaWYgKHRtcC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGRpc2FibGUoJCh0aGlzKSk7IC8vZGlzYWJsZSBidXR0b24gY2FsbGluZyB0aGlzIGFzIGEgbGlzdGVuZXIgZnVuY3QuXG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBkaXNhYmxlKCQodGhpcykpOyAvL2Rpc2FibGUgYnV0dG9uIGNhbGxpbmcgdGhpcyBhcyBhIGxpc3RlbmVyIGZ1bmN0LlxuICAgIH1cbn1cblxuZnVuY3Rpb24gYWRkSW1hZ2VzVG9Eb2N1bWVudChpbWFnZXMsIF8pIHsgLy9hcmd1bWVudCBfIGlzIGV4dHJhIHBhc3NlZCBpbiBmcm9tICQud2hlbigpLmRvbmUoKVxuICAgIHZhciAkd3JhcCA9ICQoJy53cmFwJyk7XG4gICAgJERPQy5kYXRhKCd1bmRpc3BsYXllZEltYWdlcycsIGltYWdlcyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOVU1fSU5JVElBTF9JTUFHRVMgJiYgaW1hZ2VzLmxlbmd0aCAhPT0gMDsgaSsrKSB7XG4gICAgICAgIHZhciByYW5kSW5kZXggICAgID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogaW1hZ2VzLmxlbmd0aCksXG4gICAgICAgICAgICBuZXh0SW1hZ2VJbmZvID0gaW1hZ2VzW3JhbmRJbmRleF0uaW1hZ2VpbmZvWzBdO1xuICAgICAgICBpbWFnZXMuc3BsaWNlKHJhbmRJbmRleCwgMSk7IC8vcmVtb3ZlcyB1c2VkIGltYWdlIGZyb20gYXJyYXkgYW5kIHNoaWZ0cyBhbGwgc3Vic2VxdWVudCBpbmRleGVzIGRvd24gMVxuXG4gICAgICAgIHZhciB3cmFwcGVkSW1hZ2UgPSBnZXROZXdJbWFnZUh0bWwobmV4dEltYWdlSW5mbyk7XG4gICAgICAgICR3cmFwLmFwcGVuZCh3cmFwcGVkSW1hZ2UpO1xuICAgICAgICAkKHdyYXBwZWRJbWFnZS5maW5kKCdpbWcnKVswXSkudW52ZWlsKDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykubG9hZChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsQWN0aW9uKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8qZ2V0TmV3SW1hZ2VIdG1sIHJldHVybnMgYSBuZXcgalEgbm9kZSByZXByZXNlbnRpbmcgdGhlIGlucHV0IGltYWdlXG4gd3JhcHBlZCBpbiBhIHBhZ2UgaW1hZ2Ugd3JhcHBlciovXG5mdW5jdGlvbiBnZXROZXdJbWFnZUh0bWwobmV4dEltYWdlSW5mbykge1xuICAgIHZhciByZXQgICAgICAgICAgPSAkKCc8ZGl2IGNsYXNzPVwiYm94X3dyYXBwZXIgZmxvYXR5V3JhcHBlciByb3dcIj48L2Rpdj4nKSxcbiAgICAgICAgdW52ZWlsSW1nVGFnID0gJCgnPGltZyBjbGFzcz1cInBhZ2VJbWFnZSB1LW1heC1mdWxsLXdpZHRoXCIgc3JjPVwiL2ltYWdlcy9yaW5nLmdpZlwiLz4nKTtcblxuICAgIHJldC5yZXNpemUoZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkhFWVlZWVwiKTtcbiAgICAgICAgcmVzaXplQWN0aW9uKCk7XG4gICAgfSk7XG4gICAgLy8gVE9ETzogbWFrZSBtZWRpYSBkZWxpdmVyeSByZXNwb25zaXZlL21ha2Ugc2Vuc2UgKHRoaXMgaXNuJ3QgcXVpdGUgaXQpXG4gICAgLy8gaWYgKCFpc0dyaWRBY3RpdmUoKSkge1xuICAgIC8vICAgICB1bnZlaWxJbWdUYWcuYXR0cignZGF0YS1zcmMnLCBuZXh0SW1hZ2VJbmZvLnRodW1idXJsKTtcbiAgICAvLyAgICAgY29uc29sZS5sb2coJ3RodW1iJyk7XG4gICAgLy8gfSBlbHNlIHtcbiAgICAgICAgdW52ZWlsSW1nVGFnLmF0dHIoJ2RhdGEtc3JjJywgbmV4dEltYWdlSW5mby51cmwpO1xuICAgIC8vIH1cbiAgICByZXR1cm4gcmV0LmFwcGVuZCh1bnZlaWxJbWdUYWcpO1xufVxuXG4vKmZvY3VzZWRBY3Rpb24gZmlyZXMgd2hlbiB0ZXh0IGlucHV0IGdhaW5zIGZvY3VzLlxuIElmIHRoZSBkZWZhdWx0IG1lc3NhZ2Ugd2FzIHByZXNlbnQsIGl0IGlzIGNsZWFyZWQuXG4gVGhlIHRleHQgY29sb3IgaXMgc2V0IHRvIGl0cyBub3JtYWwgdmFsdWUgKGFzIG9wcG9zZWQgdG8gdGhlXG4gZ3JleWVkLW91dCBjb2xvciBvZiB0aGUgZGVmYXVsdCBtZXNzYWdlKS5cbiAqL1xuZnVuY3Rpb24gZm9jdXNlZEFjdGlvbigpIHtcbiAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuXG4gICAgLypOT1RFOiBoYXJkIGNvZGVkIGNvbG9yIHZhbHVlIG9mIGZvY3VzZWQgdGV4dGJveCB0ZXh0Ki9cbiAgICAkdGhpcy5jc3Moe2NvbG9yOiAnIzIyMicsICdmb250LXN0eWxlJzogJ25vcm1hbCd9KTtcbiAgICBpZiAoJHRoaXMudmFsKCkgPT09IERFRkFVTFRfSU5QVVRfTUVTU0FHRSkge1xuICAgICAgICAkdGhpcy52YWwoJycpO1xuICAgIH1cbn1cblxuLyprZXl1cEFjdGlvbiBmaXJlcyB3aGVuIGEga2V5IGlzIHJlbGVhc2VkIHdoaWxlIHR5cGluZyBpbiB0ZXh0IGlucHV0LlxuIEVuYWJsZXMvZGlzYWJsZXMgc3VibWl0IGJ1dHRvbiBiYXNlZCBvbiBwcmVzZW5jZSBvZiB0ZXh0Ki9cbmZ1bmN0aW9uIGtleXVwQWN0aW9uKCkge1xuICAgIGlmICgkKHRoaXMpLnZhbCgpICE9PSAnJylcbiAgICAgICAgZW5hYmxlKCQoJy5ndWVzc1N1Ym1pdCcpKTtcbiAgICBlbHNlXG4gICAgICAgIGRpc2FibGUoJCgnLmd1ZXNzU3VibWl0JykpO1xufVxuXG4vKmJsdXJBY3Rpb24gZmlyZXMgd2hlbiB0ZXh0IGlucHV0IGxvc2VzIGZvY3VzLlxuIEVuYWJsZXMvZGlzYWJsZXMgc3VibWl0IGJ1dHRvbiBpbiB0aGUgc2FtZSB3YXkgYXMga2V5dXBBY3Rpb24uXG4gSWYgaW5wdXQgaXMgZW1wdHksIHJlcGxhY2VzIHRoZSBkZWZhdWx0IG1lc3NhZ2UgdGV4dCBhbmQgc3R5bGluZyovXG5mdW5jdGlvbiBibHVyQWN0aW9uKCkge1xuICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgaWYgKCR0aGlzLnZhbCgpICE9PSAnJylcbiAgICAgICAgZW5hYmxlKCQoJy5ndWVzc1N1Ym1pdCcpKTtcbiAgICBlbHNlIHtcbiAgICAgICAgJHRoaXMudmFsKERFRkFVTFRfSU5QVVRfTUVTU0FHRSk7XG4gICAgICAgICR0aGlzLmNzcyh7Y29sb3I6ICcjOGE4YTg5JywgJ2ZvbnQtc3R5bGUnOiAnaXRhbGljJ30pO1xuICAgICAgICBkaXNhYmxlKCQoJy5ndWVzc1N1Ym1pdCcpKTtcbiAgICB9XG59XG5cbi8qc3VibWl0QWN0aW9uIGlzIGNhbGxlZCB3aGVuIGEgZ3Vlc3MgaXMgc3VibWl0dGVkXG4gR3Vlc3MgaW5mbyBpcyBvYnRhaW5lZCBieSBsb29raW5nIGF0IHRoZSB2YWx1ZSBvZiB0aGUgdGV4dGJveC5cbiBVcGRhdGVzIHRvIGd1ZXNzIGhpc3RvcnkgYW5kIGtub3duIHdvcmRzIGFyZSBwZXJmb3JtZWQuXG4gVGhlIG1lbnUgaXMgc2Nyb2xsZWQgdG8gcHV0IHRoZSBuZXcgaGlzdG9yeSBlbnRyeSBpbnRvIHZpZXcuKi9cbmZ1bmN0aW9uIHN1Ym1pdEFjdGlvbigpIHtcbiAgICB2YXIgJG1lbnUgPSAkKCcubWVudScpLFxuICAgICAgICBzdHIgICA9ICQoJy50ZXh0RmllbGQnKS52YWwoKSxcbiAgICAgICAgZ3Vlc3MgPSBuZXcgVGl0bGVPYmplY3Qoc3RyLnJlcGxhY2UoL15cXHMqaG93XFxzK3RvXFxzKy9naSwgJycpKSxcbiAgICAgICAgdGl0bGUgPSAkRE9DLmRhdGEoJ3dpa2lQYWdlVGl0bGUnKTtcblxuICAgIGlmIChpc0dyaWRBY3RpdmUoKSkge1xuICAgICAgICBpZiAodXBkYXRlTWVudShndWVzcywgJ3Nsb3cnLCAnc2xvdycpKSB7XG4gICAgICAgICAgICBvdmVybGF5QWN0aW9uKCd3aW4nKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh1cGRhdGVNZW51TW9iaWxlKGd1ZXNzLCAnc2xvdycsICdzbG93JykpIHtcbiAgICAgICAgICAgIG92ZXJsYXlBY3Rpb24oJ3dpbicpO1xuICAgICAgICB9XG4gICAgfVxuICAgICQoJy50ZXh0RmllbGQnKS52YWwoJycpO1xufVxuXG5mdW5jdGlvbiBvdmVybGF5QWN0aW9uKHR5cGUpIHtcbiAgICBtYWtlT3ZlcmxheSh0eXBlKTtcbiAgICBvcGVuT3ZlcmxheSgpO1xufVxuXG5mdW5jdGlvbiBtYWtlT3ZlcmxheSh0eXBlKSB7XG5cbiAgICB2YXIgJG92ZXJsYXlJbmZvV3JhcHBlciA9ICQoJy5vdmVybGF5X2luZm9fd3JhcHBlcicpO1xuICAgIHZhciAkb3ZlcmxheUluZm8gPSAkb3ZlcmxheUluZm9XcmFwcGVyLmZpbmQoJy5vdmVybGF5X2luZm8nKTtcbiAgICB2YXIgJHdpblNjcmVlbiA9ICQoJy53aW5fc2NyZWVuJyk7XG5cbiAgICAkb3ZlcmxheUluZm8uaGlkZSgpO1xuICAgICRvdmVybGF5SW5mb1dyYXBwZXIucmVtb3ZlQ2xhc3MoJ2NvbnRhaW5zX2F0dHJpYnMnKS5yZW1vdmVDbGFzcygnY29udGFpbnNfd2luX3NjcmVlbicpLnJlbW92ZUNsYXNzKCdjb250YWluc19ydWxlc19zY3JlZW4nKTtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnd2luJzpcbiAgICAgICAgICAgICQoJy5zY29yZScpLnNob3coKTtcbiAgICAgICAgICAgICRvdmVybGF5SW5mb1dyYXBwZXIuYWRkQ2xhc3MoJ2NvbnRhaW5zX3dpbl9zY3JlZW4nKTtcbiAgICAgICAgICAgICR3aW5TY3JlZW4uc2hvdygpLmZpbmQoJ2gyJykudGV4dCgnWWVwIScpO1xuICAgICAgICAgICAgLy8gJCgnLndpbl9zY3JlZW4gaDInKS50ZXh0KCdZZXAhJyk7XG4gICAgICAgICAgICAkd2luU2NyZWVuLmZpbmQoJ2gyICsgaDYnKS5odG1sKCc8aT5PZiBjb3Vyc2U8L2k+IHdlXFwncmUgbGVhcm5pbmcnKTtcbiAgICAgICAgICAgIC8vICQoJy53aW5fc2NyZWVuIGgyICsgaDYnKS5odG1sKCc8aT5PZiBjb3Vyc2U8L2k+IHdlXFwncmUgbGVhcm5pbmcnKTtcbiAgICAgICAgICAgIHZhciAkY29udGFpbnNfd2luX3NjcmVlbiA9ICQoJy5jb250YWluc193aW5fc2NyZWVuJyk7XG4gICAgICAgICAgICAkY29udGFpbnNfd2luX3NjcmVlbi5jc3Moe3RvcDogKCQod2luZG93KS5oZWlnaHQoKSAtICRjb250YWluc193aW5fc2NyZWVuLm91dGVySGVpZ2h0KHRydWUpKSAvIDJ9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdsb3NzJzpcbiAgICAgICAgICAgICQoJy5zY29yZScpLmhpZGUoKTtcbiAgICAgICAgICAgICRvdmVybGF5SW5mb1dyYXBwZXIuYWRkQ2xhc3MoJ2NvbnRhaW5zX3dpbl9zY3JlZW4nKTtcbiAgICAgICAgICAgICR3aW5TY3JlZW4uc2hvdygpLmZpbmQoJ2gyJykudGV4dCgnwq9cXFxcXyjjg4QpXy/CrycpO1xuICAgICAgICAgICAgLy8gJCgnLndpbl9zY3JlZW4gaDInKS50ZXh0KCfCr1xcXFxfKOODhClfL8KvJyk7XG5cbiAgICAgICAgICAgICR3aW5TY3JlZW4uZmluZCgnaDIgKyBoNicpLmh0bWwoJ1dlIHdlcmUgY2xlYXJseSBnb2luZyBmb3InKTtcbiAgICAgICAgICAgIC8vICQoJy53aW5fc2NyZWVuIGgyICsgaDYnKS5odG1sKCdXZSB3ZXJlIGNsZWFybHkgZ29pbmcgZm9yJyk7XG5cbiAgICAgICAgICAgIHZhciAkY29udGFpbnNfd2luX3NjcmVlbiA9ICQoJy5jb250YWluc193aW5fc2NyZWVuJyk7XG4gICAgICAgICAgICAkY29udGFpbnNfd2luX3NjcmVlbi5jc3Moe3RvcDogKCQod2luZG93KS5oZWlnaHQoKSAtICRjb250YWluc193aW5fc2NyZWVuLm91dGVySGVpZ2h0KHRydWUpKSAvIDJ9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdhYm91dCc6XG4gICAgICAgICAgICAkb3ZlcmxheUluZm9XcmFwcGVyLmFkZENsYXNzKCdjb250YWluc19hdHRyaWJzJyk7XG4gICAgICAgICAgICAkKCcuYXR0cmlicycpLnNob3coKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdydWxlcyc6XG4gICAgICAgICAgICAkb3ZlcmxheUluZm9XcmFwcGVyLmFkZENsYXNzKCdjb250YWluc19ydWxlc19zY3JlZW4nKTtcbiAgICAgICAgICAgICQoJy5ydWxlc19zY3JlZW4nKS5zaG93KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVDb3VudGVycygpIHtcbiAgICAkKCcuY291bnRlcicpLmRhdGEoJ251bScsIDApO1xuICAgICQoJyNudW1JbWFnZUhpbnRzJykuZGF0YSgnbnVtJywgTlVNX0lOSVRJQUxfSU1BR0VTKTtcblxuICAgICQoJyNudW1JbWFnZUhpbnRzJykuZGF0YSgnbGFiZWxJbmZvJywgWydpbWFnZScsICdpbWFnZXMnXSk7XG4gICAgJCgnI251bVdvcmRIaW50cycpLmRhdGEoJ2xhYmVsSW5mbycsIFsnaGludCcsICdoaW50cyddKTtcbiAgICAkKCcubnVtR3Vlc3NlcycpLmRhdGEoJ2xhYmVsSW5mbycsIFsndHJ5JywgJ3RyaWVzJ10pO1xuICAgICQoJyNudW1Xb3JkcycpLmRhdGEoJ291dG9mJywgJERPQy5kYXRhKCd3aWtpUGFnZVRpdGxlJykubm9ybVRva2Vucy5sZW5ndGgpO1xuXG4gICAgJCgnLmNvdW50ZXInKS50ZXh0KCcwJyk7XG4gICAgJCgnI251bUltYWdlSGludHMnKS50ZXh0KE5VTV9JTklUSUFMX0lNQUdFUyk7XG4gICAgJCgnI251bVdvcmRzJykudGV4dCgnKDAvJyArICQoJyNudW1Xb3JkcycpLmRhdGEoJ291dG9mJykgKyAnKScpO1xufVxuXG5mdW5jdGlvbiBpbmNyZW1lbnRDb3VudGVyKGNvdW50ZXJJRCkge1xuICAgIHZhciAkY291bnRlciA9IGNvdW50ZXJJRCA9PT0gJ251bUd1ZXNzZXMnID8gJCgnLicgKyBjb3VudGVySUQpIDogJCgnIycgKyBjb3VudGVySUQpLFxuICAgICAgICBvbGRudW0gICA9ICRjb3VudGVyLmRhdGEoJ251bScpO1xuXG4gICAgJGNvdW50ZXIuZGF0YSgnbnVtJywgb2xkbnVtICsgMSk7XG4gICAgJGNvdW50ZXIudGV4dChvbGRudW0gKyAxKTtcblxuICAgIGlmIChjb3VudGVySUQgPT09ICdudW1Xb3JkcycpIHtcbiAgICAgICAgdmFyIG91dG9mID0gJGNvdW50ZXIuZGF0YSgnb3V0b2YnKTtcbiAgICAgICAgaWYgKG9sZG51bSArIDEgIT09IDApIHtcbiAgICAgICAgICAgICQoJy5lbXB0eV9tZXNzYWdlJykucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgJGNvdW50ZXIudGV4dCgnKCcgKyAob2xkbnVtICsgMSkgKyAnLycgKyBvdXRvZiArICcpJyk7XG4gICAgfVxuXG4gICAgdmFyIGxhYmVsSW5mbyA9ICRjb3VudGVyLmRhdGEoJ2xhYmVsSW5mbycpO1xuICAgIGlmIChsYWJlbEluZm8pIHtcbiAgICAgICAgdmFyICRsYWJlbCA9ICQoJyMnICsgY291bnRlcklEICsgJ19sYWJlbCcpO1xuICAgICAgICBpZiAob2xkbnVtICsgMSA9PT0gMSkge1xuICAgICAgICAgICAgJGxhYmVsLnRleHQobGFiZWxJbmZvWzBdKTtcbiAgICAgICAgfSBlbHNlIGlmIChvbGRudW0gKyAxID09PSAyKSB7XG4gICAgICAgICAgICAkbGFiZWwudGV4dChsYWJlbEluZm9bMV0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpbnNlcnRhYmxlRWxlbWVudENsaWNrQWN0aW9uKCkge1xuICAgIHZhciAkdGV4dEZpZWxkID0gJCgnLnRleHRGaWVsZCcpO1xuXG4gICAgJHRleHRGaWVsZC5mb2N1cygpO1xuICAgIGlmICgkdGV4dEZpZWxkLnZhbCgpID09PSAnJykge1xuICAgICAgICAkdGV4dEZpZWxkLnZhbCgkKHRoaXMpLnRleHQoKS50cmltKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgICR0ZXh0RmllbGQudmFsKCR0ZXh0RmllbGQudmFsKCkgKyAnICcgKyAkKHRoaXMpLnRleHQoKS50cmltKCkpO1xuICAgIH1cbn1cblxuLyp1cGRhdGVNZW51IGRlbGVnYXRlcyB0aGUgY3JlYXRpb24gb2YgbmV3IERPTSBub2RlcyBmb3IgdGhlIGd1ZXNzXG4gYW5kIGNvb3JkaW5hdGVzIHRoZWlyIGFkZGl0aW9uIHRvIHRoZSBkb2N1bWVudCB3aXRoIHJlc3BlY3QgdG8gdGhlaXJcbiBlbGVtZW50cycgYW5pbWF0aW9uIHNwZWVkcyovXG5mdW5jdGlvbiB1cGRhdGVNZW51KGd1ZXNzLCBzbGlkZUR1cmF0aW9uLCBmYWRlRHVyYXRpb24pIHtcbiAgICB2YXIgbmV3SHRtbCA9IGdldE5ld01lbnVIdG1sKGd1ZXNzLCAkRE9DLmRhdGEoJ3dpa2lQYWdlVGl0bGUnKSk7XG4gICAgYWRkTmV3R29vZFdvcmRzKG5ld0h0bWwud29yZHMsIGZhZGVEdXJhdGlvbik7XG4gICAgYWRkTmV3R3Vlc3NIaXN0b3J5KG5ld0h0bWwuaGlzdCwgc2xpZGVEdXJhdGlvbiwgZmFkZUR1cmF0aW9uKTtcbiAgICByZXR1cm4gbmV3SHRtbC53aW47XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZU1lbnVNb2JpbGUoZ3Vlc3MsIHNsaWRlRHVyYXRpb24sIGZhZGVEdXJhdGlvbikge1xuICAgIGlmICghJCgnLnRvZ2dsZScpLnByb3AoJ2NoZWNrZWQnKSlcbiAgICAgICAgJCgnLnRvZ2dsZScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgcmV0dXJuIHVwZGF0ZU1lbnUoZ3Vlc3MsIHNsaWRlRHVyYXRpb24sIGZhZGVEdXJhdGlvbik7XG59XG5cbi8qZ2V0TmV3TWVudUh0bWwgZ29lcyB0aHJvdWdoIHRoZSBuZXcgZ3Vlc3Mgd29yZC1ieS13b3JkIGFuZCBjcmVhdGVzXG4gdGhlIERPTSBub2RlcyB0aGF0IHdpbGwgZGlzcGxheSB0aGVtLiBBbGwgd29yZHMgYXJlIGV4cGxpY2l0bHkgYWRkZWQgYXNcbiB0ZXh0IG5vZGVzICh0byBhdm9pZCB4c3MpLCBhbmQgY29ycmVjdCB3b3JkcyBhcmUgd3JhcHBlZCBpbiBhbiBleHRyYSA8c3Bhbj5cbiBmb3IgaGlnaGxpZ2h0aW5nLiBOZXdseSBndWVzc2VkIGNvcnJlY3Qgd29yZHMgYXJlIGFsc28gcGFja2FnZWQgaW50b1xuIGVsZW1lbnRzIGZvciB0aGUgbGlzdCBvZiBnb29kIHdvcmRzLiBSZXN1bHRzIHJldHVybmVkIGluIG9iamVjdCBjb250YWluaW5nXG4gYW4gc05vZGUgKHNpbmdsZSBqUXVlcnkgbm9kZSB3aXRoIHRoZSBuZXcgaGlzdG9yeSBlbnRyeSkgYW5kIGEgd05vZGVMaXN0XG4gKHBvc3NpYmx5IGVtcHR5IGFycmF5IG9mIGpRdWVyeSBzZWxlY3RhYmxlX2NvbnRhaW5lci1jbGFzcyBub2RlcyBlYWNoXG4gcmVwcmVzZW50aW5nIGEgbmV3IGdvb2Qgd29yZCkqL1xuZnVuY3Rpb24gZ2V0TmV3TWVudUh0bWwoZ3Vlc3MsIHRpdGxlKSB7XG4gICAgdmFyIHNOb2RlICAgICA9ICQoJzxkaXYgY2xhc3M9XCJndWVzc19jb250YWluZXJcIj48ZGl2IGNsYXNzPVwiaW5uZXIgbWVudVRleHRcIj48L2Rpdj48L2Rpdj48aHI+JyksXG4gICAgICAgIGlubmVyICAgICA9IHNOb2RlLmZpbmQoJy5pbm5lcicpLFxuICAgICAgICB3Tm9kZUxpc3QgPSBbXSxcbiAgICAgICAgcyAgICAgICAgID0gJycsXG4gICAgICAgIHdpbiAgICAgICA9IChndWVzcy5ub3JtVG9rZW5zLmxlbmd0aCA9PT0gdGl0bGUubm9ybVRva2Vucy5sZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBndWVzcy5ub3JtVG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGl0bGUubm9ybVRva2Vucy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKGkgPT09IGogJiYgZ3Vlc3Mubm9ybVRva2Vuc1tpXSAhPT0gdGl0bGUubm9ybVRva2Vuc1tqXSkge1xuICAgICAgICAgICAgICAgIHdpbiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGd1ZXNzLm5vcm1Ub2tlbnNbaV0gPT09IHRpdGxlLm5vcm1Ub2tlbnNbal0pIHtcbiAgICAgICAgICAgICAgICBpbm5lci5hcHBlbmQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocykpO1xuICAgICAgICAgICAgICAgIHMgPSAnJztcbiAgICAgICAgICAgICAgICB2YXIgZ3cgPSAkKCc8ZW0+PC9lbT4nKS50ZXh0KGd1ZXNzLm9yaWdUb2tlbnNbaV0udHJpbSgpICsgJyAnKTtcbiAgICAgICAgICAgICAgICBndy5jbGljayhpbnNlcnRhYmxlRWxlbWVudENsaWNrQWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpbm5lci5hcHBlbmQoZ3cpO1xuICAgICAgICAgICAgICAgIGlmICh0aXRsZS5ndWVzc2VkW2pdID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdOb2RlTGlzdC5wdXNoKG1ha2VXb3JkTm9kZSh0aXRsZS5vcmlnVG9rZW5zW2pdKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGd1ZXNzLmd1ZXNzZWRbaV0rKztcbiAgICAgICAgICAgICAgICB0aXRsZS5ndWVzc2VkW2pdKys7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGogPT09IHRpdGxlLm5vcm1Ub2tlbnMubGVuZ3RoIC0gMSkgeyAvL25vIG1hdGNoICYgdGhpcyBpcyBsYXN0IHRpbWUgY29tcGFyaW5nIHRoaXMgZ3Vlc3MgdG9rXG4gICAgICAgICAgICAgICAgcyA9IHMgKyBndWVzcy5vcmlnVG9rZW5zW2ldICsgJyAnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlubmVyLmFwcGVuZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzKSk7XG4gICAgcmV0dXJuIHsnd29yZHMnOiB3Tm9kZUxpc3QucmV2ZXJzZSgpLCAnaGlzdCc6IHNOb2RlLCAnd2luJzogd2lufTtcbn1cblxuLyphZGROZXdHdWVzc0hpc3RvcnkgYW5pbWF0ZXMgdGhlIG5ldyBndWVzcyBoaXN0b3J5IGVudHJ5IGVsZW1lbnQgbm9kZVxuIGludG8gdGhlIGhpc3RvcnkgbGlzdCBpbiB0aGUgbWVudS4gTmV3IGVudHJ5IGZhZGVzIGluIG92ZXIgZmFkZUR1cmF0aW9uXG4gd2hpbGUgb2xkZXIgZW50cmllcyBzbGlkZSBkb3duIG92ZXIgc2xpZGVEdXJhdGlvbiovXG5mdW5jdGlvbiBhZGROZXdHdWVzc0hpc3RvcnkoaGlzdE5vZGUsIHNsaWRlRHVyYXRpb24sIGZhZGVEdXJhdGlvbikge1xuICAgIGluY3JlbWVudENvdW50ZXIoJ251bUd1ZXNzZXMnKTtcbiAgICAkKCcuZW1wdHlfbWVzc2FnZV9oaXN0JykucmVtb3ZlKCk7XG4gICAgJChoaXN0Tm9kZSkuaGlkZSgpLnByZXBlbmRUbygnLmhpc3RvcnlfbG9nJykuc2xpZGVEb3duKFxuICAgICAgICBzbGlkZUR1cmF0aW9uKS5mYWRlSW4oZmFkZUR1cmF0aW9uKTtcbn1cblxuLyphZGROZXdHb29kV29yZHMgaXRlcmF0ZXMgb3ZlciB0aGUgbGlzdCBvZiBuZXcgZ29vZCB3b3JkIG5vZGVzIGFuZCBmYWRlc1xuIGVhY2ggb25lIGludG8gdGhlIGRvY3VtZW50IG92ZXIgYSBzcGVjaWZpZWQgZmFkZUR1cmF0aW9uKi9cbmZ1bmN0aW9uIGFkZE5ld0dvb2RXb3Jkcyh3b3JkTm9kZUxpc3QsIGZhZGVEdXJhdGlvbikge1xuXG4gICAgZm9yICh2YXIgaSA9IHdvcmROb2RlTGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAkKHdvcmROb2RlTGlzdFtpXSkuaGlkZSgpLmFwcGVuZFRvKCcuZ29vZF93b3JkcycpLmZhZGVJbignZmFkZUR1cmF0aW9uJyk7XG4gICAgICAgIGluY3JlbWVudENvdW50ZXIoJ251bVdvcmRzJyk7XG4gICAgfVxufVxuXG4vKm1ha2VXb3JkTm9kZSByZXR1cm5zIGEgXCJnb29kX3dvcmRcIi1zdHlsZSBqUSBub2RlIHdpdGggaW5wdXQgdGV4dCBzdHJpbmcqL1xuZnVuY3Rpb24gbWFrZVdvcmROb2RlKHdvcmQpIHtcbiAgICB2YXIgc29jayA9ICQoJzxkaXYgY2xhc3M9XCJzZWxlY3RhYmxlX2NvbnRhaW5lclwiPjxzcGFuIGNsYXNzPVwid29yZCBtZW51VGV4dFwiPjwvc3Bhbj48L2Rpdj4nKSxcbiAgICAgICAgdG1wICA9IHNvY2suZmluZCgnLndvcmQnKVswXTtcbiAgICAkKHRtcCkudGV4dCh3b3JkKTtcbiAgICAkKHRtcCkuY2xpY2soaW5zZXJ0YWJsZUVsZW1lbnRDbGlja0FjdGlvbik7XG4gICAgcmV0dXJuIHNvY2s7XG59XG5cbi8qemVyb0FycmF5IHJldHVybnMgYSBuZXcgemVyby1maWxsZWQgYXJyYXkgb2YgbGVuZ3RoIGwqL1xuZnVuY3Rpb24gemVyb0FycmF5KGwpIHtcbiAgICB2YXIgcmVzID0gbmV3IEFycmF5KGwpO1xuICAgIHdoaWxlICgtLWwgPj0gMCkge1xuICAgICAgICByZXNbbF0gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuXG4vKmlzVW51c2FibGVJbWFnZSBjaGVja3MgdGhlIHRpdGxlIG9mIGFuIGltYWdlIGFnYWluc3QgYSBjb2xsZWN0aW9uIG9mXG4gdGl0bGVzIGtub3duIHRvIGJlbG9uZyB0byBqdW5rIGltYWdlcyAoZm91bmQgaW4gVW51c2FibGVJbWFnZXMuc2NyaXB0cykuXG4gUmV0dXJucyB0cnVlIGlmIGEgbWF0Y2ggaXMgaWRlbnRpZmllZC5cbiBVbnVzYWJsZSAoanVuaykgaW1hZ2VzIGFyZSBwYXJ0cyBvZiB3aWtpaG93IHBhZ2UgdGVtcGxhdGVzIHRoYXQgdGhlIHNlcnZlclxuIHJldHVybnMgYWxvbmdzaWRlIGFjdHVhbCBhcnRpY2xlIGltYWdlcyovXG5mdW5jdGlvbiBpc1VudXNhYmxlSW1hZ2UoaW1hZ2VUaXRsZSkge1xuICAgIGZvciAodmFyIGkgPSBVTlVTQUJMRV9JTUFHRVMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKFVOVVNBQkxFX0lNQUdFU1tpXSA9PT0gaW1hZ2VUaXRsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKmZpbHRlclVudXNhYmxlSW1hZ2VzIGl0ZXJhdGVzIHRocm91Z2ggYSBsaXN0IG9mIGltYWdlcywgY2FsbGluZ1xuIGlzVW51c2FibGVJbWFnZSBvbiB0aGUgdGl0bGUgb2YgZWFjaCBvbmUuIElmIGFuIGltYWdlIGlzIGZvdW5kIHRvIGJlXG4gdW51c2FibGUsIGl0IGlzIHJlbW92ZWQgZnJvbSB0aGUgYXJyYXkgYW5kIGRpc2NhcmRlZC5cbiBUaGlzIG1ldGhvZCBtb2RpZmllcyB0aGUgaW5wdXQgZGlyZWN0bHkgYW5kIGRvZXMgbm90IGhhdmUgYSByZXR1cm4gdmFsdWUqL1xuZnVuY3Rpb24gZmlsdGVyVW51c2FibGVJbWFnZXMoaW1hZ2VBcnJheSkge1xuICAgIGlmIChpbWFnZUFycmF5ICE9IG51bGwpIHsgLy8gIT0gaXMgaW50ZW50aW9uYWwsIGNoZWNrcyBmb3IgdW5kZWZpbmVkXG4gICAgICAgIGZvciAodmFyIGkgPSBpbWFnZUFycmF5Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBpZiAoaXNVbnVzYWJsZUltYWdlKGltYWdlQXJyYXlbaV0udGl0bGUpKVxuICAgICAgICAgICAgICAgIGltYWdlQXJyYXkuc3BsaWNlKGksIDEpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKnN5bnRoSW1hZ2VJbmZvUXVlcnkgcmV0dXJucyBhIHVybC1lbmNvZGVkIHN0cmluZyB3cml0dGVuIHRvIHF1ZXJ5XG4gd2lraWhvdydzIG1lZGlhd2lraSBhcGkgZm9yIHNvdXJjZSBpbmZvcm1hdGlvbiBvbiB0aGUgc3BlY2lmaWNcbiBpbWFnZXMgY29udGFpbmVkIGluIHRoZSBpbnB1dCBsaXN0LiAqL1xuZnVuY3Rpb24gc3ludGhJbWFnZUluZm9RdWVyeShwYWdlSW1hZ2VzKSB7XG4gICAgLy9iYXNlIHVybCB0byBxdWVyeSBhcGkgZm9yIGltYWdlIHNvdXJjZXNcbiAgICB2YXIgcXVlcnlVcmwgPVxuICAgICAgICAgICAgJ2h0dHBzOi8vd3d3Lndpa2lob3cuY29tL2FwaS5waHA/YWN0aW9uPXF1ZXJ5JmZvcm1hdD1qc29uJnByb3A9aW1hZ2VpbmZvJnRpdGxlcz0nO1xuICAgIC8vYXBwZW5kIGltYWdlIHRpdGxlcyBzZXBlcmF0ZWQgYnkgJyU3QycgKHVybCBlbmNvZGVkICd8JylcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhZ2VJbWFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcXVlcnlVcmwgPSBxdWVyeVVybCArIHBhZ2VJbWFnZXNbaV0udGl0bGU7XG4gICAgICAgIGlmIChpIDwgcGFnZUltYWdlcy5sZW5ndGggLSAxKVxuICAgICAgICAgICAgcXVlcnlVcmwgPSBxdWVyeVVybCArICclN0MnOyAvL3VybC1lbmNvZGVkICd8J1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBxdWVyeVVybCA9IHF1ZXJ5VXJsICsgJyZpaXByb3A9dXJsJTdDc2l6ZSZpaXVybHdpZHRoPTUwMCc7IC8vYWRkaXRpb25hbCBxdWVyeSBwcm9wZXJ0aWVzXG4gICAgfVxuICAgIHF1ZXJ5VXJsID0gcXVlcnlVcmwucmVwbGFjZSgvIC9nLCAnKycpOyAvL3VybC1lbmNvZGUgc3BhY2VzXG4gICAgcmV0dXJuIHF1ZXJ5VXJsO1xufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9\n","var STD_PUNCT             = /[\\'!\"#$%&()*+,\\-.\\/:;<=>?@\\[\\]^_`{|}~]/g,\n    SEP_PUNCT             = /[\"(),<>?@\\[\\]_{}]/g,\n    NUM_INITIAL_IMAGES    = 2,\n    MIN_PAGE_IMAGES       = 4, //must be >= NUM_INITIAL_IMAGES\n    DEFAULT_INPUT_MESSAGE = 'How to...',\n    $DOC                  = $(document),\n    linkedPageId          = getPageParameter(),\n    promisedUsablePage    = asyncQueryForRandomUsablePage(linkedPageId);\nvar gFirstScroll  = false,\n    gDiff         = 0,\n    gMobileLayout = !isGridActive();\n\nvar styles2Nuke = [];\n\n$.when( //coordinates page loading (a masterpiece)\n    promisedUsablePage.then(asyncQueryForPageImages),\n    $DOC.data('readyDeferred')\n).done(addImagesToDocument);\n\n$DOC.data('readyDeferred', $.Deferred()).ready(function () {\n    var $textField = $('.textField'),\n        $tog       = $('.toggle'),\n        $gamepanel = $('.game.panel');\n\n    $.when(promisedUsablePage).done(pageFoundAction);\n\n    $DOC.data('readyDeferred').resolve();\n\n    $DOC.data('fixedFloatWidth', $gamepanel.width());\n    $DOC.data('fixedFloatLeft', $gamepanel.offset().left);\n\n    $(window).scroll(scrollAction);\n    $(window).resize(resizeAction);\n    $DOC.resize(resizeAction);\n    var $panel_buttons = $('.gb');\n    // $panel_buttons.blur(gPanelButtonBlurAction);\n    $panel_buttons.click(gPanelButtonPressedAction);\n\n    $('#imagehint').click(addImageToDocument);\n    $('#wordhint').click(giveWordHint);\n    $('.card_overlay, button.card_close').click(closeCard);\n\n    $textField.focus(focusedAction);\n    $textField.keyup(keyupAction);\n    $textField.blur(blurAction);\n    $tog.change(slide);\n\n    $('.close_link').click(closeOverlay);\n    $('.copy_link').click(copyURL);\n    $('.about').click(function () {\n        overlayAction('about');\n    });\n    // $('.top_header').click(function () {\n    //     overlayAction('win');\n    // });\n    $('.card_giveup').click(function () {\n        overlayAction('loss');\n    });\n}); //End $DOC.ready\n\nfunction getPageParameter() {\n    var queryStringParams = window.location.search.substring(1).split('&');\n    for (var i = 0, len = queryStringParams.length; i < len; i++) {\n        var param = queryStringParams[i].split('=');\n        if (param[0] === 'p') {\n            return param[1];\n        }\n    }\n}\nfunction copyURL() {\n    if ($(this).hasClass('end_screen')) {\n        var $url_text = $('.url_text.end_screen');\n    } else {\n        var $url_text = $('.url_text.share_screen');\n    }\n    $url_text.focus();\n    $url_text.select();\n    document.execCommand(\"copy\");\n    $('.copy_tooltip_text').text('Copied!');\n\n}\n\nfunction pageFoundAction(pageInfo) {\n    $DOC.data('wikiPageTitle', new TitleObject(pageInfo.title));\n    $DOC.data('wikiPageId', pageInfo.pageid);\n    $DOC.data('wikiPageURL', pageInfo.fullurl);\n\n    var directUrl = encodeURI(window.location.protocol + \"//\" + window.location.host + window.location.pathname + \"?p=\" + pageInfo.pageid);\n\n    // var tweetHref = 'https://twitter.com/intent/tweet?'+encodeURI('text=WikiWhat?&url=' + directUrl);\n    //\n    // $('.twitter').attr('href', tweetHref);\n    // var $fb = $('.facebook');\n    // var fbhref= $fb.attr('href');\n    // // $('.google_plus').attr('href', 'https://plusone.google.com/_/+1/confirm?hl=en&url=http%3A%2F%2F%20'+directUrl);\n    // console.log(fbhref.replace('INSERT_URL_HERE', directUrl));\n    // $fb.attr('href', fbhref.replace('INSERT_URL_HERE', directUrl));\n    // $('.a2a_kit').attr('data-a2a-url', directUrl);\n    $('.url_text').val(directUrl);\n    prepareOverlay(pageInfo);\n    initializeCounters();\n}\n\n\n\nfunction openCard() {\n    nukeStyles();\n    if (isGridActive()) {\n        $('.menu_clip').addClass('slid');\n    }\n    $('.card').addClass('slid');\n    $('.card_overlay').addClass('selected');\n    $('.card_clip').addClass('higherZIndex');\n}\n\nfunction closeCard() {\n    $('.card_overlay').removeClass('selected');\n    setTimeout(function () {\n        $('.card_message').removeClass('selected');\n    }, 400);\n    $('.card, .menu_clip').removeClass('slid');\n\n    $('.card_clip').removeClass('higherZIndex');\n\n}\n\nfunction prepareOverlay(pageInfo) {\n    $('.page_link').attr('href', pageInfo.fullurl).prepend('<span>How to ' + pageInfo.title + '</span>');\n}\n\nfunction isGridActive() {\n    return ($('.trim').css('display') !== 'none');\n}\n\nfunction resizeAction() {\n    var $gamepanel = $('.panel.game');\n\n    gDiff = $DOC.scrollTop() + $(window).height() - ($DOC.height() - $('.page_footer').height());\n\n    $DOC.data('fixedFloatWidth', $gamepanel.width());\n    $DOC.data('fixedFloatLeft', $gamepanel.offset().left);\n    scrollAction();\n    if (isGridActive()) {\n        if (gMobileLayout) {\n            gMobileLayout = false;\n            nukeStyles();\n        }\n    } else {\n        if (!gMobileLayout) {\n            gMobileLayout = true;\n            nukeStyles();\n        }\n    }\n}\n\nfunction nukeStyles() {\n    if (styles2Nuke.length === 0) {\n        var $widgetheader = $('.widget_header');\n        styles2Nuke.push(\n            $('.history_log'),\n            $('.menu_clip'),\n            $('.sliding_up_mobile'),\n            $widgetheader,\n            $widgetheader.find('i'),\n            $widgetheader.find('.band'),\n            $('.guessSection'),\n            $('.spacie')\n        );\n    }\n    for (var i = styles2Nuke.length; i <= 0; i--) {\n        styles2Nuke[i].removeAttr('style');\n    }\n    $('.answer').css('box-shadow', ''); //done separately to preserve custom 'bottom' prop\n    $('.toggle').removeAttr('checked');\n}\n\nfunction scrollAction() {\n    if ($(document.activeElement).hasClass('gb')) {\n        $(document.activeElement).blur();\n    }\n    if (isGridActive()) {\n        if (!gFirstScroll) {\n            gFirstScroll = true;\n            resizeAction();\n            return;\n        }\n        var $gamepanel  = $('.game.panel'),\n            $historyLog = $('.history_log'),\n            $menuClip   = $('.menu_clip'),\n            $answer     = $('.answer'),\n            space       = $(window).scrollTop() - ($gamepanel.offset().top + $gamepanel.height());\n\n        closeCard();\n        gDiff = $(window).scrollTop() + $(window).height() - $('.page_footer').offset().top;\n\n        if (gDiff > 0) {\n            $answer.add($menuClip).css({bottom: gDiff});\n        } else {\n            $answer.add($menuClip).css({bottom: 0});\n        }\n        if (space > 0) {\n            $('.spacie').css({\n                position: 'relative'\n            });\n            $historyLog.css({\n                \"max-height\": $answer[0].getBoundingClientRect().top - $historyLog[0].getBoundingClientRect().top - 30\n            });\n            $menuClip.css({\n                position: 'fixed',\n                width: $DOC.data('fixedFloatWidth'),\n                top: 20,\n                left: $DOC.data('fixedFloatLeft')\n            });\n            $menuClip.find('.panel').css({\n                'box-shadow': '0 0 8px rgba(0, 0, 0, 0.16)'\n            });\n        } else {\n            $menuClip.css({\n                position: '',\n                width: '',\n                top: '',\n                left: '',\n                'box-shadow': ''\n            });\n            $menuClip.find('.panel').css({\n                'box-shadow': ''\n            });\n            $('.spacie').css({\n                position: 'absolute',\n                height: $menuClip.outerHeight(true)\n            });\n        }\n    }\n}\n\nfunction gPanelButtonPressedAction() {\n    $('.card_message').removeClass('selected');\n    var $this = $(this);\n    if ($this.attr('id') === 'rules') {\n        overlayAction('rules');\n        return;\n    }\n    if ($this.attr('id') === 'giveup') {\n        $('.giveup_confirmation').addClass('selected');\n    } else if ($this.attr('id') === 'restart') {\n        $('.restart_confirmation').addClass('selected');\n    } else if ($this.attr('id') === 'share') {\n        $('.sharingsux').addClass('selected');\n    }\n    openCard();\n}\n\nfunction disable(jQueryObj) {\n    return jQueryObj.attr('disabled', 'true');\n}\n\nfunction enable(jQueryObj) {\n    return jQueryObj.removeAttr('disabled');\n}\n\nfunction TitleObject(str) {\n    this.origString = str;\n    this.origTokens = str.match(/\\S+/g); //original chars/punct\n    this.normTokens =\n        diacritics2url.replaceDiacritics(str.toLowerCase().replace(STD_PUNCT, ''))\n            .match(/\\S+/g);\n    this.wordTokens = str.replace(SEP_PUNCT, '').match(/\\S+/g);\n    this.guessed = zeroArray(this.origTokens.length);\n}\n\nfunction slide() {\n    var $this                        = $(this),\n        $widgetHeader                = $('.widget_header'),\n        $widgetHeaderAndGuessSection = $widgetHeader.add('.guessSection'),\n        $answer                      = $('.answer'),\n        $menuClip                    = $('.menu_clip'),\n        $topHeader                   = $('.top_header'),\n        $widgetHeaderAndI            = $widgetHeader.find('i'),\n        $widgetHeaderAndBand         = $widgetHeader.find('.band'),\n        $slidingUpMobile             = $('.sliding_up_mobile');\n\n    $slidingUpMobile.css({\n        \"transform\": \"translate(0,0)\"\n    });\n    if (!$this.prop('checked')) {\n        $slidingUpMobile.animate({\n            \"transform\": \"translate(0,0)\"\n        }, 500, 'swing', function () {\n            $widgetHeaderAndGuessSection.css({\n                'box-shadow': 'none'\n            });\n            $answer.css({\n                'box-shadow': '0 0 10px rgba(0, 0, 0, 0.16)'\n            });\n            $menuClip.add($topHeader).removeAttr('style');\n        });\n\n        $widgetHeaderAndI.css({\n            \"transform\": \"rotate(0deg)\"\n        });\n        $widgetHeaderAndBand.css({\n            'border-bottom': '.5px solid #8a8a89'\n        });\n\n    } else {\n        closeCard();\n        $menuClip.css({\n            \"z-index\": 1\n        });\n        $topHeader.css({\n            \"z-index\": 1\n        });\n        $slidingUpMobile.css({\n            \"transform\": \"translate(0,-\" + $('.menu').height() + \"px)\"\n        });\n        $widgetHeaderAndI.css({\n            \"transform\": \"rotate(180deg)\"\n        });\n        $widgetHeaderAndBand.css({\n            'border-bottom': 'none'\n        });\n        $widgetHeaderAndGuessSection.css({\n            'box-shadow': '0 0 10px rgba(0, 0, 0, 0.16)'\n        });\n        $answer.css({\n            'box-shadow': 'none'\n        });\n    }\n}\n\nfunction openOverlay() {\n    $('.overlay').height('100%');\n}\n\nfunction closeOverlay() {\n    $('.overlay').height('0');\n}\n\nfunction asyncQueryForRandomUsablePage(pageid) {\n    /* request random article and see if it has enough usable images*/\n    var pageid = pageid || null;\n    var newURL;\n    if (pageid != null) {\n        newURL = 'https://www.wikihow.com/api.php?action=query&format=json&prop=info%7Cimages&pageids=' + pageid + '&inprop=url&imlimit=100';\n    } else {\n        newURL = 'https://www.wikihow.com/api.php?action=query&format=json&prop=info%7Cimages&generator=random&inprop=url&imlimit=100&grnnamespace=0#';\n    }\n\n\n    return $.ajax({ //get random page using mediawiki API\n        url: newURL,\n        dataType: 'jsonp'\n    }).then(function (data) {\n        /*The mediawiki api answers our request with a complex json object structure.\n         However, all of the data we're interested in is kept in a sub-object, \"pageInfo\"\n         Accessing it requires making this series of calls:\n         var page = jsonpData.query.pages;\n         var pageId = Object.keys(page)[0];\n         var pageInfo = page[pageId.toString()];\n         This is condensed to the lines below: */\n        var pageInfo = data.query.pages[Object.keys(data.query.pages)[0].toString()];\n        console.log(pageInfo);\n        console.log(pageInfo.fullurl);\n        console.log(pageInfo.images);\n        filterUnusableImages(pageInfo.images);\n\n\n        if (pageInfo.images == null || // == is intentional, checks for undefined\n            pageInfo.images.length < MIN_PAGE_IMAGES ||\n            pageInfo.title.length > 256) {\n\n            return asyncQueryForRandomUsablePage(); //try again\n        }\n        return pageInfo;\n    });\n}\n\nfunction asyncQueryForPageImages(pageInfo) {\n    return $.ajax({ //make another async. request for image urls\n        url: synthImageInfoQuery(pageInfo.images),\n        dataType: 'jsonp'\n    }).then(function (data) {\n        //create array and fill w/ slightly more accessable image data\n        var images = [];\n        var keys = Object.keys(data.query.pages);\n\n        for (var i = 0; i < keys.length; i++) {\n            //put image objects in new array\n            if (keys[i] > 0) { //missing images have ids of -1; don't include\n                var current = data.query.pages[keys[i].toString()];\n                images.push(current);\n            }\n        }\n        return images;\n    });\n}\n\nfunction addImageToDocument() {\n    var images = $DOC.data('undisplayedImages');\n    if (images.length !== 0) {\n        var $wrap = $('.wrap');\n        var randIndex = Math.floor(Math.random() * images.length);\n        var nextImageInfo = images[randIndex].imageinfo[0];\n\n        images.splice(randIndex, 1); //removes used image from array and shifts all subsequent indexes down 1\n\n        var wrappedImage = getNewImageHtml(nextImageInfo);\n        $wrap.append(wrappedImage);\n        incrementCounter('numImageHints');\n\n        $(wrappedImage.find('img')[0]).unveil(0, function () {\n            $(this).load(function () {\n                scrollAction();\n            })\n        });\n        if (images.length < 1) {\n            disable($(this)); //disable button calling this as a listener funct.\n        }\n    } else {\n        disable($(this));\n    }\n\n}\n\nfunction giveWordHint() {\n    console.log(\"lol\");\n    var title = $DOC.data('wikiPageTitle');\n    var tmp = [];\n    for (var i = title.normTokens.length - 1; i >= 0; i--) {\n        if (title.guessed[i] === 0) {\n            tmp.push(i);\n        }\n    }\n    if (tmp.length >= 1) {\n        var n = Math.floor(Math.random() * tmp.length);\n        title.guessed[tmp[n]]++;\n        incrementCounter('numWordHints');\n\n        addNewGoodWords(makeWordNode(title.wordTokens[tmp[n]]), 'slow');\n        if (tmp.length === 1) {\n            disable($(this)); //disable button calling this as a listener funct.\n        }\n    } else {\n        disable($(this)); //disable button calling this as a listener funct.\n    }\n}\n\nfunction addImagesToDocument(images, _) { //argument _ is extra passed in from $.when().done()\n    var $wrap = $('.wrap');\n    $DOC.data('undisplayedImages', images);\n    for (var i = 0; i < NUM_INITIAL_IMAGES && images.length !== 0; i++) {\n        var randIndex     = Math.floor(Math.random() * images.length),\n            nextImageInfo = images[randIndex].imageinfo[0];\n        images.splice(randIndex, 1); //removes used image from array and shifts all subsequent indexes down 1\n\n        var wrappedImage = getNewImageHtml(nextImageInfo);\n        $wrap.append(wrappedImage);\n        $(wrappedImage.find('img')[0]).unveil(0, function () {\n            $(this).load(function () {\n                scrollAction();\n            })\n        });\n    }\n}\n\n/*getNewImageHtml returns a new jQ node representing the input image\n wrapped in a page image wrapper*/\nfunction getNewImageHtml(nextImageInfo) {\n    var ret          = $('<div class=\"box_wrapper floatyWrapper row\"></div>'),\n        unveilImgTag = $('<img class=\"pageImage u-max-full-width\" src=\"/images/ring.gif\"/>');\n\n    ret.resize(function () {\n        console.log(\"HEYYYY\");\n        resizeAction();\n    });\n    // TODO: make media delivery responsive/make sense (this isn't quite it)\n    // if (!isGridActive()) {\n    //     unveilImgTag.attr('data-src', nextImageInfo.thumburl);\n    //     console.log('thumb');\n    // } else {\n        unveilImgTag.attr('data-src', nextImageInfo.url);\n    // }\n    return ret.append(unveilImgTag);\n}\n\n/*focusedAction fires when text input gains focus.\n If the default message was present, it is cleared.\n The text color is set to its normal value (as opposed to the\n greyed-out color of the default message).\n */\nfunction focusedAction() {\n    var $this = $(this);\n\n    /*NOTE: hard coded color value of focused textbox text*/\n    $this.css({color: '#222', 'font-style': 'normal'});\n    if ($this.val() === DEFAULT_INPUT_MESSAGE) {\n        $this.val('');\n    }\n}\n\n/*keyupAction fires when a key is released while typing in text input.\n Enables/disables submit button based on presence of text*/\nfunction keyupAction() {\n    if ($(this).val() !== '')\n        enable($('.guessSubmit'));\n    else\n        disable($('.guessSubmit'));\n}\n\n/*blurAction fires when text input loses focus.\n Enables/disables submit button in the same way as keyupAction.\n If input is empty, replaces the default message text and styling*/\nfunction blurAction() {\n    var $this = $(this);\n    if ($this.val() !== '')\n        enable($('.guessSubmit'));\n    else {\n        $this.val(DEFAULT_INPUT_MESSAGE);\n        $this.css({color: '#8a8a89', 'font-style': 'italic'});\n        disable($('.guessSubmit'));\n    }\n}\n\n/*submitAction is called when a guess is submitted\n Guess info is obtained by looking at the value of the textbox.\n Updates to guess history and known words are performed.\n The menu is scrolled to put the new history entry into view.*/\nfunction submitAction() {\n    var $menu = $('.menu'),\n        str   = $('.textField').val(),\n        guess = new TitleObject(str.replace(/^\\s*how\\s+to\\s+/gi, '')),\n        title = $DOC.data('wikiPageTitle');\n\n    if (isGridActive()) {\n        if (updateMenu(guess, 'slow', 'slow')) {\n            overlayAction('win');\n        }\n    } else {\n        if (updateMenuMobile(guess, 'slow', 'slow')) {\n            overlayAction('win');\n        }\n    }\n    $('.textField').val('');\n}\n\nfunction overlayAction(type) {\n    makeOverlay(type);\n    openOverlay();\n}\n\nfunction makeOverlay(type) {\n\n    var $overlayInfoWrapper = $('.overlay_info_wrapper');\n    var $overlayInfo = $overlayInfoWrapper.find('.overlay_info');\n    var $winScreen = $('.win_screen');\n\n    $overlayInfo.hide();\n    $overlayInfoWrapper.removeClass('contains_attribs').removeClass('contains_win_screen').removeClass('contains_rules_screen');\n    switch (type) {\n        case 'win':\n            $('.score').show();\n            $overlayInfoWrapper.addClass('contains_win_screen');\n            $winScreen.show().find('h2').text('Yep!');\n            // $('.win_screen h2').text('Yep!');\n            $winScreen.find('h2 + h6').html('<i>Of course</i> we\\'re learning');\n            // $('.win_screen h2 + h6').html('<i>Of course</i> we\\'re learning');\n            var $contains_win_screen = $('.contains_win_screen');\n            $contains_win_screen.css({top: ($(window).height() - $contains_win_screen.outerHeight(true)) / 2});\n            break;\n        case 'loss':\n            $('.score').hide();\n            $overlayInfoWrapper.addClass('contains_win_screen');\n            $winScreen.show().find('h2').text('¯\\\\_(ツ)_/¯');\n            // $('.win_screen h2').text('¯\\\\_(ツ)_/¯');\n\n            $winScreen.find('h2 + h6').html('We were clearly going for');\n            // $('.win_screen h2 + h6').html('We were clearly going for');\n\n            var $contains_win_screen = $('.contains_win_screen');\n            $contains_win_screen.css({top: ($(window).height() - $contains_win_screen.outerHeight(true)) / 2});\n            break;\n        case 'about':\n            $overlayInfoWrapper.addClass('contains_attribs');\n            $('.attribs').show();\n            break;\n        case 'rules':\n            $overlayInfoWrapper.addClass('contains_rules_screen');\n            $('.rules_screen').show();\n            break;\n    }\n}\n\nfunction initializeCounters() {\n    $('.counter').data('num', 0);\n    $('#numImageHints').data('num', NUM_INITIAL_IMAGES);\n\n    $('#numImageHints').data('labelInfo', ['image', 'images']);\n    $('#numWordHints').data('labelInfo', ['hint', 'hints']);\n    $('.numGuesses').data('labelInfo', ['try', 'tries']);\n    $('#numWords').data('outof', $DOC.data('wikiPageTitle').normTokens.length);\n\n    $('.counter').text('0');\n    $('#numImageHints').text(NUM_INITIAL_IMAGES);\n    $('#numWords').text('(0/' + $('#numWords').data('outof') + ')');\n}\n\nfunction incrementCounter(counterID) {\n    var $counter = counterID === 'numGuesses' ? $('.' + counterID) : $('#' + counterID),\n        oldnum   = $counter.data('num');\n\n    $counter.data('num', oldnum + 1);\n    $counter.text(oldnum + 1);\n\n    if (counterID === 'numWords') {\n        var outof = $counter.data('outof');\n        if (oldnum + 1 !== 0) {\n            $('.empty_message').remove();\n        }\n        $counter.text('(' + (oldnum + 1) + '/' + outof + ')');\n    }\n\n    var labelInfo = $counter.data('labelInfo');\n    if (labelInfo) {\n        var $label = $('#' + counterID + '_label');\n        if (oldnum + 1 === 1) {\n            $label.text(labelInfo[0]);\n        } else if (oldnum + 1 === 2) {\n            $label.text(labelInfo[1]);\n        }\n    }\n}\n\nfunction insertableElementClickAction() {\n    var $textField = $('.textField');\n\n    $textField.focus();\n    if ($textField.val() === '') {\n        $textField.val($(this).text().trim());\n    } else {\n        $textField.val($textField.val() + ' ' + $(this).text().trim());\n    }\n}\n\n/*updateMenu delegates the creation of new DOM nodes for the guess\n and coordinates their addition to the document with respect to their\n elements' animation speeds*/\nfunction updateMenu(guess, slideDuration, fadeDuration) {\n    var newHtml = getNewMenuHtml(guess, $DOC.data('wikiPageTitle'));\n    addNewGoodWords(newHtml.words, fadeDuration);\n    addNewGuessHistory(newHtml.hist, slideDuration, fadeDuration);\n    return newHtml.win;\n}\n\nfunction updateMenuMobile(guess, slideDuration, fadeDuration) {\n    if (!$('.toggle').prop('checked'))\n        $('.toggle').trigger('click');\n    return updateMenu(guess, slideDuration, fadeDuration);\n}\n\n/*getNewMenuHtml goes through the new guess word-by-word and creates\n the DOM nodes that will display them. All words are explicitly added as\n text nodes (to avoid xss), and correct words are wrapped in an extra <span>\n for highlighting. Newly guessed correct words are also packaged into\n elements for the list of good words. Results returned in object containing\n an sNode (single jQuery node with the new history entry) and a wNodeList\n (possibly empty array of jQuery selectable_container-class nodes each\n representing a new good word)*/\nfunction getNewMenuHtml(guess, title) {\n    var sNode     = $('<div class=\"guess_container\"><div class=\"inner menuText\"></div></div><hr>'),\n        inner     = sNode.find('.inner'),\n        wNodeList = [],\n        s         = '',\n        win       = (guess.normTokens.length === title.normTokens.length);\n\n    for (var i = 0; i < guess.normTokens.length; i++) {\n        for (var j = 0; j < title.normTokens.length; j++) {\n            if (i === j && guess.normTokens[i] !== title.normTokens[j]) {\n                win = false;\n            }\n            if (guess.normTokens[i] === title.normTokens[j]) {\n                inner.append(document.createTextNode(s));\n                s = '';\n                var gw = $('<em></em>').text(guess.origTokens[i].trim() + ' ');\n                gw.click(insertableElementClickAction);\n                inner.append(gw);\n                if (title.guessed[j] === 0) {\n                    wNodeList.push(makeWordNode(title.origTokens[j]));\n                }\n                guess.guessed[i]++;\n                title.guessed[j]++;\n                break;\n            } else if (j === title.normTokens.length - 1) { //no match & this is last time comparing this guess tok\n                s = s + guess.origTokens[i] + ' ';\n            }\n        }\n    }\n    inner.append(document.createTextNode(s));\n    return {'words': wNodeList.reverse(), 'hist': sNode, 'win': win};\n}\n\n/*addNewGuessHistory animates the new guess history entry element node\n into the history list in the menu. New entry fades in over fadeDuration\n while older entries slide down over slideDuration*/\nfunction addNewGuessHistory(histNode, slideDuration, fadeDuration) {\n    incrementCounter('numGuesses');\n    $('.empty_message_hist').remove();\n    $(histNode).hide().prependTo('.history_log').slideDown(\n        slideDuration).fadeIn(fadeDuration);\n}\n\n/*addNewGoodWords iterates over the list of new good word nodes and fades\n each one into the document over a specified fadeDuration*/\nfunction addNewGoodWords(wordNodeList, fadeDuration) {\n\n    for (var i = wordNodeList.length - 1; i >= 0; i--) {\n        $(wordNodeList[i]).hide().appendTo('.good_words').fadeIn('fadeDuration');\n        incrementCounter('numWords');\n    }\n}\n\n/*makeWordNode returns a \"good_word\"-style jQ node with input text string*/\nfunction makeWordNode(word) {\n    var sock = $('<div class=\"selectable_container\"><span class=\"word menuText\"></span></div>'),\n        tmp  = sock.find('.word')[0];\n    $(tmp).text(word);\n    $(tmp).click(insertableElementClickAction);\n    return sock;\n}\n\n/*zeroArray returns a new zero-filled array of length l*/\nfunction zeroArray(l) {\n    var res = new Array(l);\n    while (--l >= 0) {\n        res[l] = 0;\n    }\n    return res;\n}\n\n/*isUnusableImage checks the title of an image against a collection of\n titles known to belong to junk images (found in UnusableImages.scripts).\n Returns true if a match is identified.\n Unusable (junk) images are parts of wikihow page templates that the server\n returns alongside actual article images*/\nfunction isUnusableImage(imageTitle) {\n    for (var i = UNUSABLE_IMAGES.length - 1; i >= 0; i--) {\n        if (UNUSABLE_IMAGES[i] === imageTitle) {\n            return true;\n        }\n    }\n    return false;\n}\n\n/*filterUnusableImages iterates through a list of images, calling\n isUnusableImage on the title of each one. If an image is found to be\n unusable, it is removed from the array and discarded.\n This method modifies the input directly and does not have a return value*/\nfunction filterUnusableImages(imageArray) {\n    if (imageArray != null) { // != is intentional, checks for undefined\n        for (var i = imageArray.length - 1; i >= 0; i--) {\n            if (isUnusableImage(imageArray[i].title))\n                imageArray.splice(i, 1);\n        }\n    }\n}\n\n/*synthImageInfoQuery returns a url-encoded string written to query\n wikihow's mediawiki api for source information on the specific\n images contained in the input list. */\nfunction synthImageInfoQuery(pageImages) {\n    //base url to query api for image sources\n    var queryUrl =\n            'https://www.wikihow.com/api.php?action=query&format=json&prop=imageinfo&titles=';\n    //append image titles seperated by '%7C' (url encoded '|')\n    for (var i = 0; i < pageImages.length; i++) {\n        queryUrl = queryUrl + pageImages[i].title;\n        if (i < pageImages.length - 1)\n            queryUrl = queryUrl + '%7C'; //url-encoded '|'\n        else\n            queryUrl = queryUrl + '&iiprop=url%7Csize&iiurlwidth=500'; //additional query properties\n    }\n    queryUrl = queryUrl.replace(/ /g, '+'); //url-encode spaces\n    return queryUrl;\n}\n"],"sourceRoot":"/source/"}